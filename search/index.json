[{"content":"æ­£æ–‡æµ‹è¯• è€Œè¿™äº›å¹¶ä¸æ˜¯å®Œå…¨é‡è¦ï¼Œæ›´åŠ é‡è¦çš„é—®é¢˜æ˜¯ï¼Œ å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å®¡è§†ä¸€ä¸‹å­¦ç”Ÿä¼šé€€ä¼šã€‚ æ—¢ç„¶å¦‚ä½•ï¼Œ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹ä¸€ä¸ªéå¸¸å°´å°¬çš„äº‹å®ï¼Œé‚£å°±æ˜¯ï¼Œ å¯æ˜¯ï¼Œå³ä½¿æ˜¯è¿™æ ·ï¼Œå­¦ç”Ÿä¼šé€€ä¼šçš„å‡ºç°ä»ç„¶ä»£è¡¨äº†ä¸€å®šçš„æ„ä¹‰ã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œå‘ç”Ÿäº†ä¼šå¦‚ä½•ï¼Œä¸å‘ç”Ÿåˆä¼šå¦‚ä½•ã€‚ ç»è¿‡ä¸Šè¿°è®¨è®ºï¼Œ ç”Ÿæ´»ä¸­ï¼Œè‹¥å­¦ç”Ÿä¼šé€€ä¼šå‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•å®ç°ã€‚ è¿™æ ·çœ‹æ¥ï¼Œ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ å°±æˆ‘ä¸ªäººæ¥è¯´ï¼Œå­¦ç”Ÿä¼šé€€ä¼šå¯¹æˆ‘çš„æ„ä¹‰ï¼Œä¸èƒ½ä¸è¯´éå¸¸é‡å¤§ã€‚ èå£«æ¯”äºšæ›¾ç»æåˆ°è¿‡ï¼Œäººçš„ä¸€ç”Ÿæ˜¯çŸ­çš„ï¼Œä½†å¦‚æœå‘åŠ£åœ°è¿‡è¿™ä¸€ç”Ÿï¼Œå°±å¤ªé•¿äº†ã€‚è¿™ä¼¼ä¹è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ã€‚ è«æ‰ç‰¹è¯´è¿‡ä¸€å¥å¯Œæœ‰å“²ç†çš„è¯ï¼Œè°å’Œæˆ‘ä¸€æ ·ç”¨åŠŸï¼Œè°å°±ä¼šå’Œæˆ‘ä¸€æ ·æˆåŠŸã€‚è¿™å¯å‘äº†æˆ‘ï¼Œ å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ç”Ÿä¼šé€€ä¼šä¸ä»…ä»…æ˜¯ä¸€ä¸ªé‡å¤§çš„äº‹ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæ”¹å˜æˆ‘çš„äººç”Ÿã€‚ å­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•å®ç°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œ ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œ è¿™ç§äº‹å®å¯¹æœ¬äººæ¥è¯´æ„ä¹‰é‡å¤§ï¼Œç›¸ä¿¡å¯¹è¿™ä¸ªä¸–ç•Œä¹Ÿæ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ã€‚ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ äº†è§£æ¸…æ¥šå­¦ç”Ÿä¼šé€€ä¼šåˆ°åº•æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„å­˜åœ¨ï¼Œæ˜¯è§£å†³ä¸€åˆ‡é—®é¢˜çš„å…³é”®ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œ ç”Ÿæ´»ä¸­ï¼Œè‹¥å­¦ç”Ÿä¼šé€€ä¼šå‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚ é—®é¢˜çš„å…³é”®ç©¶ç«Ÿä¸ºä½•ï¼Ÿ è€Œè¿™äº›å¹¶ä¸æ˜¯å®Œå…¨é‡è¦ï¼Œæ›´åŠ é‡è¦çš„é—®é¢˜æ˜¯ã€‚\nå¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸºæ›¾ç»è¯´è¿‡ï¼Œå…±åŒçš„äº‹ä¸šï¼Œå…±åŒçš„æ–—äº‰ï¼Œå¯ä»¥ä½¿äººä»¬äº§ç”Ÿå¿å—ä¸€åˆ‡çš„åŠ›é‡ã€‚ã€€å¸¦ç€è¿™å¥è¯ï¼Œæˆ‘ä»¬è¿˜è¦æ›´åŠ æ…é‡çš„å®¡è§†è¿™ä¸ªé—®é¢˜ï¼š ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»åŠ¡å¿…æ…é‡çš„è€ƒè™‘è€ƒè™‘ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œ è¿™ç§äº‹å®å¯¹æœ¬äººæ¥è¯´æ„ä¹‰é‡å¤§ï¼Œç›¸ä¿¡å¯¹è¿™ä¸ªä¸–ç•Œä¹Ÿæ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ã€‚ å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å®¡è§†ä¸€ä¸‹å­¦ç”Ÿä¼šé€€ä¼šã€‚ æˆ‘è®¤ä¸ºï¼Œ æˆ‘è®¤ä¸ºï¼Œ åœ¨è¿™ç§å›°éš¾çš„æŠ‰æ‹©ä¸‹ï¼Œæœ¬äººæ€æ¥æƒ³å»ï¼Œå¯é£Ÿéš¾å®‰ã€‚ é—®é¢˜çš„å…³é”®ç©¶ç«Ÿä¸ºä½•ï¼Ÿ æ¯ä¸ªäººéƒ½ä¸å¾—ä¸é¢å¯¹è¿™äº›é—®é¢˜ã€‚ åœ¨é¢å¯¹è¿™ç§é—®é¢˜æ—¶ï¼Œ è¦æƒ³æ¸…æ¥šï¼Œå­¦ç”Ÿä¼šé€€ä¼šï¼Œåˆ°åº•æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„å­˜åœ¨ã€‚ æˆ‘è®¤ä¸ºï¼Œ æ—¢ç„¶å¦‚æ­¤ï¼Œ æ¯ä¸ªäººéƒ½ä¸å¾—ä¸é¢å¯¹è¿™äº›é—®é¢˜ã€‚ åœ¨é¢å¯¹è¿™ç§é—®é¢˜æ—¶ï¼Œ é‚£ä¹ˆï¼Œ æˆ‘è®¤ä¸ºï¼Œ å­¦ç”Ÿä¼šé€€ä¼šå› ä½•è€Œå‘ç”Ÿã€‚\nå¼•ç”¨ æ€å¿µæ˜¯æœ€æš–çš„å¿§ä¼¤åƒä¸€åŒç¿…è†€\nè®©æˆ‘åœä¸äº†é£ä¸è¿œåœ¨è¿‡å¾€æ¸¸è¡\nä¸å‘Šè€Œåˆ«çš„ä½  å°±ç®—ä¸ºäº†æˆ‘ç€æƒ³\nè¿™ä¹ˆæ²‰ç—›çš„å‘µæŠ¤ æˆ‘æ€ä¹ˆèƒ½ç¿±ç¿”\næœ€æš–çš„æ†‚å‚· - ç”°é¦¥ç”„\nå›¾ç‰‡ 1 2 3 ![Photo by Florian Klauer on Unsplash](florian-klauer-nptLmg6jqDo-unsplash.jpg) ![Photo by Luca Bravo on Unsplash](luca-bravo-alS7ewQ41M8-unsplash.jpg) ![Photo by Helena Hertz on Unsplash](helena-hertz-wWZzXlDpMog-unsplash.jpg) ![Photo by Hudai Gayiran on Unsplash](hudai-gayiran-3Od_VKcDEAA-unsplash.jpg) ç›¸å†Œè¯­æ³•æ¥è‡ª Typlog\n","date":"2022-06-18T16:06:59+08:00","image":"https://qiyueliuhuo.github.io/posts/%E4%B8%BB%E9%A2%98%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/helena-hertz-wWZzXlDpMog-unsplash_hu45a5e3ad5e058da6a00650ed8fd40bea_15530_120x120_fill_q75_box_smart1.jpg","permalink":"https://qiyueliuhuo.github.io/posts/%E4%B8%BB%E9%A2%98%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/","title":"ä¸»é¢˜æµ‹è¯•æ–‡ç« "},{"content":"åšå®¢è¿ç§»åˆ°hugoï¼Œè¿™æ˜¯ç¬¬ä¸€ç¯‡æµ‹è¯•æ–‡ç« ã€‚\nhugoå¸¸ç”¨å‘½ä»¤\n1 2 hugo new --kind post-bundle posts/æµ‹è¯•æ–‡ç«  # åˆ›å»ºä¸€ä¸ªæ–‡ç« ç›®å½• hugo server -D # å¯åŠ¨æœåŠ¡å™¨ï¼Œæ˜¾ç¤ºè‰ç¨¿æ–‡ç«  ","date":"2022-06-03T17:22:13+08:00","permalink":"https://qiyueliuhuo.github.io/posts/my-first-hugo-post/","title":"My First Hugo Post"},{"content":"Module nn.BNReLU2d æºç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class BNReLU2d(nnq.BatchNorm2d): r\u0026#34;\u0026#34;\u0026#34; A BNReLU2d module is a fused module of BatchNorm2d and ReLU We adopt the same interface as :class:`torch.nn.quantized.BatchNorm2d`. Attributes: Same as torch.nn.quantized.BatchNorm2d \u0026#34;\u0026#34;\u0026#34; _FLOAT_MODULE = torch.nn.intrinsic.BNReLU2d def __init__(self, num_features, eps=1e-5, momentum=0.1): super(BNReLU2d, self).__init__(num_features, eps=eps, momentum=momentum) def forward(self, input): # Temporarily using len(shape) instead of ndim due to JIT issue # https://github.com/pytorch/pytorch/issues/23890 if len(input.shape) != 4: raise ValueError(\u0026#34;Input shape must be `(N, C, H, W)`!\u0026#34;) return torch.ops.quantized.batch_norm2d_relu( input, self.weight, self.bias, self.running_mean, self.running_var, self.eps, self.scale, self.zero_point) def _get_name(self): return \u0026#39;QuantizedBNReLU2d\u0026#39; @classmethod def from_float(cls, mod): # TODO: Add qat support for BNReLU2d return super(BNReLU2d, cls).from_float(mod)) nn.BatchNorm2d 1 2 3 4 5 class BatchNorm2d(_BatchNorm): def _check_input_dim(self, input): if input.dim() != 4: raise ValueError(\u0026#39;expected 4D input (got {}D input)\u0026#39; .format(input.dim())) torch.nn.BatchNorm2ç±»å¦‚ä¸Šé¢æºç æ‰€ç¤ºï¼Œè¯¥ç±»å…·ä½“å®ç°éƒ¨åˆ†åŸºæœ¬ä¸Šéƒ½æ¥è‡ªç»§æ‰¿_BatchNormè¿™ä¸ªå†…éƒ¨ç±»ï¼Œè€Œåè€…ç±»é‡Œé¢å…·ä½“å®ç°ä¸æ˜¯ç”¨pythonå®ç°çš„ï¼Œè€Œæ˜¯ç”¨c++ã€cudaå®ç°çš„ï¼Œè¿™é‡Œæˆ‘å°±ä¸å…·ä½“åˆ†æåº•å±‚æºç äº†ã€‚\nä¸‹é¢åˆ†æè¿™ä¸ªç±»åŠŸèƒ½ï¼š\nè¿™ç¯‡è®ºæ–‡ä¸­Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shiftæå‡ºäº†BNå±‚ã€‚é¦–å…ˆè¯¥ç±»çš„è¾“å…¥ä¸ºå°æ‰¹é‡å¸¦é€šé“çš„äºŒç»´è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥çš„å¤§å°ä¸º(N,C,H,W)ã€‚å¯¹è¾“å…¥çš„æ•°æ®åšå¦‚ä¸‹å…¬å¼çš„å˜æ¢ï¼š $$ y = \\frac{x - \\mathrm{E}[x]}{ \\sqrt{\\mathrm{Var}[x] + \\epsilon}} * \\gamma + \\beta $$ å¹³å‡å€¼å’Œæ ‡å‡†å·®æ˜¯æŒ‰å°æ‰¹é‡çš„æ¯ä¸ªç»´åº¦è®¡ç®—ï¼Œ$\\gamma$å’Œ$\\beta$ä¸ºé€šé“ç»´åº¦ä¸Šçš„å¯å­¦ä¹ çš„å‚æ•°å‘é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ$\\gamma$ä¸º1ï¼Œ$\\beta$ä¸º0ã€‚\n","date":"2021-03-14T15:53:39Z","permalink":"https://qiyueliuhuo.github.io/posts/pytorch%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E4%B8%89/","title":"Pytorchæºç é˜…è¯»(ä¸‰)ï¼šBatchNorm Module"},{"content":" æ³¨ï¼šç¬”è€…é˜…è¯»çš„pytorchç‰ˆæœ¬ä¸º1.7.0ï¼Œtorchvisionç‰ˆæœ¬ä¸º0.6\nå‰è¨€ åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä¸»è¦æ¥å†™å…³äºpytorchä¸­transformsæ¨¡å—ï¼Œè¯¥æ¨¡å—æä¾›äº†å¯¹å›¾åƒå„ç§é¢„å¤„ç†æ–¹æ³•ï¼Œä½äºtorchvision/transforms/transforms.pyï¼Œè¿™äº›æ–¹æ³•ä¼šåº”ç”¨åœ¨æ¨¡å‹è®­ç»ƒæ¨ç†å‰ï¼Œå¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œå†å°†å¤„ç†åçš„å›¾åƒé€è¿›æ·±åº¦ç½‘ç»œä¸­è®­ç»ƒä¸æ¨ç†ã€‚æˆ‘æƒ³å†™è¿™ç¯‡æ–‡ç« å¯¹è¿™äº›é¢„å¤„ç†æ–¹æ³•ï¼Œè¿›è¡Œå­¦ä¹ ç†è§£ï¼Œå°½å¯èƒ½ä»æºç è§’åº¦ï¼Œå½¢è±¡ç›´è§‚åœ°å±•ç¤ºè¿™äº›å›¾åƒé¢„å¤„ç†æ˜¯å¦‚ä½•å¯¹å›¾åƒè¿›è¡Œè½¬æ¢çš„ã€‚\ntransforms ï¼š è¯»[trÃ¦nsËˆfÉ”Ëm]ï¼Œå˜æ¢ã€è½¬æ¢ã€ç§»åŠ¨ã€‚ eg. Fourier transform å‚…é‡Œå¶å˜æ¢ï¼› It was an event that would transform my life. é‚£æ˜¯èƒ½å¤Ÿå½»åº•æ”¹å˜æˆ‘ä¸€ç”Ÿçš„ä¸€ä»¶äº‹ã€‚\ntransforms æ¨¡å—ç›¸å…³æºç åˆ†æ transforms.Composeç±» å…ˆæ¥çœ‹ä¸‹transforms.Composeåœ¨å®é™…ä»£ç ä¸­æ˜¯å¦‚ä½•è¿ç”¨çš„ï¼Œä¸‹é¢ä»£ç æ˜¯ä½¿ç”¨pytorchä¸­çš„Datasetæ–¹å¼å®šä¹‰ImageNetæ•°æ®é›†ï¼Œä¹Ÿå°±è¯´ImageNetç»§æ‰¿è‡ªdata.Datasetã€‚\n1 2 3 4 5 6 7 train_dataset = torchvision.datasets.ImageNet(train_path, transform=transforms.Compose([ transforms.Resize((32, 32)), # å°†å›¾ç‰‡ç¼©æ”¾åˆ°æŒ‡å®šå¤§å°ï¼ˆh,wï¼‰æˆ–è€…ä¿æŒé•¿å®½æ¯”å¹¶ç¼©æ”¾æœ€çŸ­çš„è¾¹åˆ°intå¤§å° transforms.CenterCrop(32), transforms.ToTensor()]) ) ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºæ¥transformsæ¨¡å—å®šä¹‰çš„å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥ç»™ImageNetï¼Œåœ¨ã€Špytorchæºç (ä¸€)ã€‹ä¸­ï¼Œäº†è§£åˆ°ï¼Œé€šè¿‡forå¾ªç¯å¯ä»¥éå†Datasetå¯¹è±¡è·å–å›¾åƒæ•°æ®ï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»çš„transformsæ¨¡å—å®šä¹‰çš„ç±»ï¼Œä¸€èˆ¬åœ¨éå†Datasetè·å–å›¾åƒå‰å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œé‚£ä¹ˆé€šè¿‡forå¾ªç¯å¾—åˆ°çš„å›¾åƒå°±æ˜¯è¿›è¡Œå¤„ç†åçš„å›¾åƒã€‚\nä¸‹é¢æ¥åˆ†ætransforms.Composeæºç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 class Compose(object): \u0026#34;\u0026#34;\u0026#34;Composes several transforms together. Args: transforms (list of ``Transform`` objects): list of transforms to compose. Example: \u0026gt;\u0026gt;\u0026gt; transforms.Compose([ \u0026gt;\u0026gt;\u0026gt; transforms.CenterCrop(10), \u0026gt;\u0026gt;\u0026gt; transforms.ToTensor(), \u0026gt;\u0026gt;\u0026gt; ]) \u0026#34;\u0026#34;\u0026#34; def __init__(self, transforms): self.transforms = transforms def __call__(self, img): for t in self.transforms: img = t(img) return img def __repr__(self): format_string = self.__class__.__name__ + \u0026#39;(\u0026#39; for t in self.transforms: format_string += \u0026#39;\\n\u0026#39; format_string += \u0026#39; {0}\u0026#39;.format(t) format_string += \u0026#39;\\n)\u0026#39; return format_string Composeæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒæ˜¯å¯¹å¤šä¸ªtransformsæ¨¡å—å®šä¹‰è½¬æ¢å¯¹è±¡transformç»„åˆï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹åˆ—è¡¨çš„åŒ…è£…ï¼ˆè£…é¥°æ¨¡å¼ï¼Ÿï¼‰ã€‚\nè¿™é‡Œæˆ‘å°†è¿™äº›è½¬æ¢å¯¹è±¡ç±»å®šä¹‰ä¸ºtransformï¼ŒåŒ…æ‹¬transforms.CenterCropã€transforms.ToTensorç­‰ç­‰ã€‚\nè¯¥ç±»çš„æ„é€ å™¨(constructor)å‡½æ•°å…¥å‚ä¸ºåˆ—è¡¨ç±»å‹ï¼Œåˆ—è¡¨é‡Œæ˜¯å¤šä¸ªtransformè½¬æ¢å¯¹è±¡ï¼›åœ¨__call__ä¸­ï¼Œé€šè¿‡forå¾ªç¯éå†transformsåˆ—è¡¨ï¼Œå¯¹å›¾åƒä¾æ¬¡è¿›è¡Œè°ƒç”¨t(img)ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªtransforméƒ½æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œé€šè¿‡ä¾æ¬¡è°ƒç”¨è¿™äº›transformï¼Œå¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œè¿™äº›å¤„ç†æ˜¯æŒ‰ç…§åˆ—è¡¨é¡ºåºå¤„ç†ã€‚æ³¨ï¼šlistæ˜¯ä¸€ç§æœ‰åºçš„é›†åˆã€‚\ntransforms.Resizeç±» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class Resize(object): \u0026#34;\u0026#34;\u0026#34;Resize the input PIL Image to the given size. Args: size (sequence or int): Desired output size. If size is a sequence like (h, w), output size will be matched to this. If size is an int, smaller edge of the image will be matched to this number. i.e, if height \u0026gt; width, then image will be rescaled to (size * height / width, size) interpolation (int, optional): Desired interpolation. Default is ``PIL.Image.BILINEAR`` \u0026#34;\u0026#34;\u0026#34; def __init__(self, size, interpolation=Image.BILINEAR): assert isinstance(size, int) or (isinstance(size, Iterable) and len(size) == 2) self.size = size self.interpolation = interpolation def __call__(self, img): \u0026#34;\u0026#34;\u0026#34; Args: img (PIL Image): Image to be scaled. Returns: PIL Image: Rescaled image. \u0026#34;\u0026#34;\u0026#34; return F.resize(img, self.size, self.interpolation) def __repr__(self): interpolate_str = _pil_interpolation_to_str[self.interpolation] return self.__class__.__name__ + \u0026#39;(size={0}, interpolation={1})\u0026#39;.format(self.size, interpolate_str) å…ˆåˆ†æResizeçš„æ„é€ å™¨æ–¹æ³•ï¼Œå‚æ•°sizeï¼Œä¸ºè½¬æ¢åçš„å›¾åƒåƒç´ å¤§å°ï¼Œå¦‚æœsizeå‚æ•°æ˜¯è¿™æ ·çš„åºåˆ—ï¼ˆhï¼Œwï¼‰ï¼Œè¾“å‡ºå¤§å°å°†ä¸æ­¤åŒ¹é…ã€‚å¦‚æœsizeæ˜¯intï¼Œå›¾åƒçš„è¾ƒå°è¾¹ç­‰äºæ­¤æ•°å­—ã€‚å¦‚æœheight \u0026gt; widthï¼Œåˆ™å›¾åƒå°†è¢«é‡æ–°ç¼©æ”¾åˆ°$\\left(\\text{size} \\times \\frac{\\text{height}}{\\text{width}}, \\text{size}\\right)$ã€‚å¦ä¸€ä¸ªå‚æ•°ä¸ºinterpolationï¼Œç¿»è¯‘ä¸ºæ’å€¼ï¼Œé»˜è®¤å€¼ä¸ºåŒçº¿æ€§æ’å€¼ï¼Œè¿™é‡Œæˆ‘çŒœæµ‹ä¸‹ï¼Œå½“éœ€è¦å°†å›¾åƒåˆ†è¾¨ç‡å˜å¤§ï¼Œæ¯”å¦‚300*400æé«˜è‡³600*500åˆ†è¾¨ç‡ï¼Œå› ä¸ºåˆ†è¾¨ç‡ä¹˜ç§¯ä»£è¡¨åƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œåˆ†è¾¨ç‡å¢å¤§ï¼Œé‚£ä¹ˆåŸæœ‰çš„å›¾åƒåƒç´ ç‚¹ä¸å¤Ÿï¼Œéœ€è¦é€šè¿‡æ’å€¼çš„æ–¹å¼æ–°ç”Ÿæˆä¸€éƒ¨åˆ†åƒç´ ç‚¹ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯æ§åˆ¶å¦‚ä½•äº§ç”Ÿè¿™éƒ¨åˆ†çš„åƒç´ ç‚¹ï¼Œåœ¨åé¢åˆ†ææºç æˆ‘ä¼šè¯¦ç»†åœ°è¯´æ˜æ’å€¼æ–¹æ³•ã€‚\nåˆ†æ__call__æ–¹æ³•ï¼Œå®ƒçš„å†…éƒ¨çš„å®ç°ç›´æ¥è°ƒç”¨äº†torchvision/transforms/functional.pyæ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œfunctional.pyæ¨¡å—åŒ…å«äº†å¾ˆå¤šå¯¹å›¾åƒè½¬æ¢çš„å…·ä½“æ–¹æ³•å®ç°ï¼Œæ¯”å¦‚resize(img, size, interpolation=Image.BILINEAR)æ–¹æ³•çš„å…·ä½“å®ç°ç­‰ç­‰ã€‚\nä¸‹é¢æˆ‘ä½¿ç”¨Resizeé€šè¿‡ä»£ç å°†475 * 300å¤§å°å›¾ç‰‡è½¬æ¢ä¸º237 * 150å¤§å°çš„å›¾ç‰‡ã€‚\n1 2 3 4 5 6 7 8 from torchvision.transforms import transforms from PIL import Image im = Image.open(\u0026#34;resources/dog-4671215_1280.jpg\u0026#34;) resize = transforms.Resize((150, 237)) im = resize(im) im.show() im.save(\u0026#39;resources/dog-150_237.jpg\u0026#39;) ç¼©å°ä¸º ä¸‹é¢æˆ‘æ¥å…·ä½“åˆ†æfunctional.pyæ¨¡å—ä¸­çš„resizeæ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 def resize(img, size, interpolation=Image.BILINEAR): r\u0026#34;\u0026#34;\u0026#34;Resize the input PIL Image to the given size. Args: img (PIL Image): Image to be resized. size (sequence or int): Desired output size. If size is a sequence like (h, w), the output size will be matched to this. If size is an int, the smaller edge of the image will be matched to this number maintaing the aspect ratio. i.e, if height \u0026gt; width, then image will be rescaled to :math:`\\left(\\text{size} \\times \\frac{\\text{height}}{\\text{width}}, \\text{size}\\right)` interpolation (int, optional): Desired interpolation. Default is ``PIL.Image.BILINEAR`` Returns: PIL Image: Resized image. \u0026#34;\u0026#34;\u0026#34; if not _is_pil_image(img): raise TypeError(\u0026#39;img should be PIL Image. Got {}\u0026#39;.format(type(img))) if not (isinstance(size, int) or (isinstance(size, Iterable) and len(size) == 2)): raise TypeError(\u0026#39;Got inappropriate size arg: {}\u0026#39;.format(size)) if isinstance(size, int): w, h = img.size if (w \u0026lt;= h and w == size) or (h \u0026lt;= w and h == size): return img if w \u0026lt; h: ow = size oh = int(size * h / w) return img.resize((ow, oh), interpolation) else: oh = size ow = int(size * w / h) return img.resize((ow, oh), interpolation) else: return img.resize(size[::-1], interpolation) resizeå‡½æ•°æ˜¯å®šä¹‰åœ¨functional.pyæ¨¡å—ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå‰ä¸¤ä¸ªifè¯­å¥ï¼Œç”¨æ¥åšå‚æ•°ç±»å‹æ ¡éªŒï¼Œä¸»è¦ç”¨åˆ°pythonä¸­å†…ç½®çš„isinstance(x, A_tuple)å‡½æ•°ï¼Œè¿”å›å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹è¿˜æ˜¯å­ç±»çš„å®ä¾‹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼Œæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªç±»å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªç±»å¯¹è±¡çš„å…ƒç»„ã€‚å…³äºIterableçš„ç†è§£å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ç†è§£Pythonçš„Iterableå’ŒIteratorã€‚\nå…¶ä»–éƒ¨åˆ†çš„ä»£ç ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œisinstance(size, int)ä¸ºTrueæ—¶ï¼Œsizeä¸ºå›¾åƒè¾ƒå°çš„è¾¹çš„è¾“å‡ºå¤§å°,è¾“å‡ºå›¾åƒå¦ä¸€è¾¹çš„å¤§å°æ ¹æ®åŸå›¾çš„æ¯”ä¾‹è®¡ç®—å¾—å‡ºã€‚\næœ€åçš„elseåˆ†æ”¯ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œåœ¨è¿™é‡Œå¯ä»¥å­¦ä¹ åˆ°çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚ä½•å–å¾—ä¸€ä¸ªåˆ—è¡¨å€’åºçš„ç»“æœï¼Ÿè¿™é‡Œç”¨äº†åˆ‡ç‰‡çš„æ–¹å¼size[::-1]ï¼Œæ¥å°†å…¥å‚æ˜¯ä¼ å…¥çš„(h, w)é€†åºå˜æˆ(w, h)ï¼Œå†ä¼ å…¥PIL.Imageå¯¹è±¡çš„resize()æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´pytorchæœ¬èº«æ²¡æœ‰è‡ªå·±å®ç°å¯¹å›¾åƒçš„resizeæ–¹æ³•ï¼Œè€Œæ˜¯åœ¨åº•å±‚è°ƒç”¨çš„PILå›¾åƒåº“çš„æ–¹æ³•ã€‚\nä¸‹é¢å…ˆæ’å…¥ä¸€äº›å¯¹pythonä¸­åˆ‡ç‰‡çš„å­¦ä¹ ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘æ¯æ¬¡é‡åˆ°åˆ‡ç‰‡è¡¨è¾¾æ–¹å¼éƒ½è¦é‡æ–°æŸ¥ä¸€éå„ç§åˆ‡ç‰‡å…·ä½“æ˜¯ä»£è¡¨çš„ä»€ä¹ˆå«ä¹‰ï¼ˆğŸ˜–ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 Last login: Wed Mar 10 14:19:12 on ttys001 \u0026gt;\u0026gt;\u0026gt; L = list(range(10)) \u0026gt;\u0026gt;\u0026gt; L [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u0026gt;\u0026gt;\u0026gt; L[::-1] # å€’åºæ’åˆ—å¹¶ä¸”æ¯1ä¸ªå–ä¸€ä¸ª [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] \u0026gt;\u0026gt;\u0026gt; L[::-2] # å€’åºæ’åˆ—å¹¶ä¸”æ¯2ä¸ªå–ä¸€ä¸ª [9, 7, 5, 3, 1] \u0026gt;\u0026gt;\u0026gt; L[::2] # æ­£åºæ’åˆ—å¹¶ä¸”æ¯2ä¸ªå–ä¸€ä¸ª [0, 2, 4, 6, 8] \u0026gt;\u0026gt;\u0026gt; L[:] # åŸæ ·å¤åˆ¶ [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u0026gt;\u0026gt;\u0026gt; L[1:5] # å–ç¬¬ä¸€ä¸ªåˆ°ç¬¬äº”ä¸ª [1, 2, 3, 4] å‚è€ƒï¼špythonåˆ‡ç‰‡\nè‡³äºPIL.Imageå¯¹è±¡çš„resize()æ–¹æ³•å…·ä½“åˆ†æï¼Œå†…éƒ¨å®ç°æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå…ˆæš‚æ—¶çœç•¥ï¼Œåé¢å†è¡¥(ğŸ¤¦)â€ï¸ã€‚\ntransforms.CenterCropç±» CenterCropç±»çš„åŠŸèƒ½æ˜¯ä¾æ®ç»™å®šçš„sizeä»ä¸­å¿ƒè£å‰ªï¼Œåœ¨pytorchä¸­çš„å®ç°éå¸¸ç®€å•ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥æºç äº†ï¼Œç®€å•çœ‹ä¸‹å®ƒçš„æ„é€ å™¨æ–¹æ³•ï¼Œå‚æ•°sizeä¸º(h, w)ï¼Œä»£è¡¨è£å‰ªåçš„å›¾åƒåˆ†è¾¨ç‡å¤§å°ï¼Œè€Œå¦‚æœsizeä¸ºintå‹ï¼Œé‚£ä¹ˆè£å‰ªä¸º(size, size)å¤§å°çš„æ­£æ–¹å½¢ä¸­å¿ƒå›¾åƒã€‚ä¾‹å¦‚ï¼Œä¸‹é¢åœ¨475 * 300å¤§å°å›¾åƒçš„ä¸­å¿ƒéƒ¨åˆ†è£å‰ªå‡º120 * 120å¤§å°çš„å›¾åƒï¼š è£å‰ªå‡º transforms.ToTensor 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class ToTensor(object): \u0026#34;\u0026#34;\u0026#34;Convert a ``PIL Image`` or ``numpy.ndarray`` to tensor. Converts a PIL Image or numpy.ndarray (H x W x C) in the range [0, 255] to a torch.FloatTensor of shape (C x H x W) in the range [0.0, 1.0] if the PIL Image belongs to one of the modes (L, LA, P, I, F, RGB, YCbCr, RGBA, CMYK, 1) or if the numpy.ndarray has dtype = np.uint8 In the other cases, tensors are returned without scaling. \u0026#34;\u0026#34;\u0026#34; def __call__(self, pic): \u0026#34;\u0026#34;\u0026#34; Args: pic (PIL Image or numpy.ndarray): Image to be converted to tensor. Returns: Tensor: Converted image. \u0026#34;\u0026#34;\u0026#34; return F.to_tensor(pic) def __repr__(self): return self.__class__.__name__ + \u0026#39;()\u0026#39; ToTensorä»ç±»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥è¿™ä¸ªç±»ä¸»è¦å°†PIL.Imageå¯¹è±¡å’Œnumpy.ndarrayå¯¹è±¡è½¬æ¢ä¸ºtorch.FloatTensorå¯¹è±¡ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ€ç»ˆçš„è½¬æ¢å¾—åˆ°çš„Tensorå¯¹è±¡çš„sizeæ˜¯(C x H x W)ï¼Œé€šé“æ•°åœ¨å‰é¢ï¼Œä¹Ÿå°±æ˜¯è¯´pytorchåœ¨å¤„ç†å›¾åƒæ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†ä¸‰ç»´çš„å›¾åƒæ’åˆ—æ˜¯(é€šé“æ•°ï¼Œé«˜åº¦ï¼Œå®½åº¦)ã€‚å¦å¤–ï¼Œè¯¥ç±»è¿˜ä¼šå°†åŸæœ¬çš„0~255çš„RGBä¸‰åŸè‰²å¼ºåº¦å€¼è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œç»Ÿä¸€é™¤ä»¥255ï¼Œä½¿å¾—å€¼åœ¨0.0~1.0ä¹‹é—´ã€‚\n","date":"2021-03-11T14:15:04Z","permalink":"https://qiyueliuhuo.github.io/posts/pytorch%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E4%BA%8C/","title":"Pytorchæºç é˜…è¯»(äºŒ)ï¼štransformsæ¨¡å—"},{"content":" vueå­¦ä¹ è®°å½•ã€‚\næ³¨ï¼š\nå­¦ä¹ ç›®å½•åœ¨Workplace/vueLearningã€‚ å­¦å®Œè¦ç»¼åˆå­¦è¿‡å‰ç«¯å’Œåç«¯çŸ¥è¯†ï¼Œå¼€å‘ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ï¼Œç»¼åˆåº”ç”¨çŸ¥è¯†ã€‚ ä½¿ç”¨çš„å¼€å‘IDEä¸ºWebStormã€‚ ä¸€ã€é‚‚é€…Vuejs è®¤è¯†Vuejs Vueåœ¨å›½å†…ç›¸æ¯”äºReactä½¿ç”¨æ›´åŠ å¹¿æ³›ã€æ›´ç«ã€‚\nä¸‰å¤§æ¡†æ¶ï¼šVueJsã€AngularJsã€Reactã€‚ Vueï¼šè¯»éŸ³/vju:/ï¼Œç±»ä¼¼äºviewã€‚ Vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶ï¼š\nVueå¯ä»¥ä½œä¸ºä½ åº”ç”¨çš„ä¸€éƒ¨åˆ†åµŒå…¥å…¶ä¸­ã€‚ï¼ˆä¸€ç‚¹ä¸€ç‚¹æ¸è¿›å¼å¼•å…¥Vueï¼‰ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Vueæ ¸å¿ƒåº“åŠå…¶ç”Ÿæ€ç³»ç»Ÿã€‚ï¼ˆVueå…¨å®¶æ¡¶ï¼‰ Vueçš„ç‰¹ç‚¹å’Œé«˜çº§åŠŸèƒ½ï¼šï¼ˆç›®å‰ä¸å¤ªäº†è§£ï¼Œæ…¢æ…¢å­¦ä¹ ï¼Œæ…¢æ…¢ä½“ä¼šï¼‰\nè§£è€¦è§†å›¾å’Œæ•°æ® å¯å¤ç”¨çš„ç»„ä»¶ å‰ç«¯è·¯ç”±æŠ€æœ¯ çŠ¶æ€ç®¡ç† è™šæ‹ŸDOM å­¦ä¹ Vueå‰æï¼š\nå¯ä»¥ä»é›¶å­¦ä¹ ï¼Œä¸éœ€è¦å…¶ä»–æ¡†æ¶çš„çŸ¥è¯†ä¸ºå‰æã€‚ éœ€è¦å…·å¤‡ä¸€å®šçš„HTMLã€CSSã€JavaScriptåŸºç¡€ã€‚ (JSâ€» ã€ES6â€»ã€‚ä»¥åéƒ½ä¼šç”¨ES6ï¼‰ å¦ï¼š xcode è¯»éŸ³ï¼šå‰codeã€‚ Vueä¸è¦è¯»æˆvã€uã€eã€‚ Vuejså®‰è£…æ–¹å¼ æ–¹å¼ä¸€ï¼šç›´æ¥CDNå¼•å…¥ æ–¹å¼äºŒï¼šä¸‹è½½å’Œå¼•å…¥ å¦ï¼š - ç›´æ¥ä¸‹è½½ï¼Œæ‹·è´åˆ°é¡¹ç›®é‡Œé¢å°±å¯ä»¥ä½¿ç”¨ï¼Œåªæœ‰ä¸€ä¸ªvue.jsæ–‡ä»¶ï¼Œhinæ–¹ä¾¿ã€‚\næ–¹å¼ä¸‰ï¼šNPMå®‰è£… åç»­é€šè¿‡webpackå’ŒCLIçš„ä½¿ç”¨ï¼Œç„¶åå†ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ Vuejsåˆä½“éªŒ scriptå¼•å…¥vueå¹¶ä½¿ç”¨ï¼š ä¿®æ”¹æ•°æ®ï¼š1. ç•Œé¢ä¸ç”¨æ”¹ï¼Œå£°æ˜å¼å¼€å‘ã€‚ 2. å“åº”å¼ï¼šå½“æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œç•Œé¢è‡ªåŠ¨æ”¹å˜ã€‚ åˆ›å»ºVueå¯¹è±¡æ—¶å€™ï¼Œä¼ å…¥å‚æ•°å«ä¹‰ï¼š\n{}ä¸­åŒ…å«äº†elå±æ€§ï¼šè¯¥å±æ€§å†³å®šäº†è¿™ä¸ªvueå¯¹è±¡æŒ‚è½½åˆ°å“ªä¸€ä¸ªå…ƒç´ ã€‚ {}ä¸­åŒ…å«äº†dataå±æ€§:è¯¥å±æ€§ä¸­é€šå¸¸ä¼šå­˜å‚¨ä¸€äº›æ•°æ®ã€‚ æ•°æ®å¯ä»¥æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ã€‚ ä¹Ÿå¯ä»¥æ˜¯æ¥è‡ªç½‘ç»œï¼Œä»æœåŠ¡å™¨åŠ è½½åˆ°çš„ã€‚ åˆ—è¡¨å±•ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;!--{{movies}} --\u0026gt; \u0026lt;!-- è¿™ç§ä¼šå±•ç¤ºæˆjsonæ ¼å¼æ•°æ®--\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;item in movies\u0026#34;\u0026gt;{{item}}\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;../js/vue.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; const app = new Vue({ el: \u0026#39;#app\u0026#39;, data: { message: \u0026#39;ä½ å¥½å‘€\u0026#39;, movies: [\u0026#39;æ˜Ÿé™…ç©¿è¶Š\u0026#39;, \u0026#39;å¤§è¯è¥¿æ¸¸\u0026#39;, \u0026#39;ç›—å¢“ç©ºé—´\u0026#39;, \u0026#39;åˆ‡å°”è¯ºè´åˆ©\u0026#39;] } }) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Vueè®¡æ•°å™¨æ¡ˆä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;å½“å‰è®¡æ•°ï¼š{{counter}}\u0026lt;/h2\u0026gt; \u0026lt;button v-on:click=\u0026#34;add\u0026#34;\u0026gt;+\u0026lt;/button\u0026gt; \u0026lt;button v-on:click=\u0026#34;sub\u0026#34;\u0026gt;-\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;../js/vue.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; const app = new Vue({ el: \u0026#34;#app\u0026#34;, data: { counter: 0 }, methods: { add: function () { console.log(\u0026#39;addè¢«æ‰§è¡Œ\u0026#39;); this.counter++ }, sub: function () { console.log(\u0026#39;subè¢«æ‰§è¡Œ\u0026#39;); this.counter-- } } }) \u0026lt;/script\u0026gt; å¦ï¼š ES6ä¸å†ä½¿ç”¨varå®šä¹‰å˜é‡ï¼Œè€Œæ˜¯ä½¿ç”¨letï¼Œletå®šä¹‰å˜é‡ï¼Œconstå®šä¹‰å¸¸é‡ã€‚ å¯ä»¥åœ¨æ¸¸è§ˆå™¨consoleä¸­ä¿®æ”¹æ•°æ®ï¼Œä¼šè‡ªåŠ¨å“åº”å¼å±•ç¤ºã€‚ @clickæ˜¯ v-on:clickçš„è¯­æ³•ç³–ã€‚ Vuejsçš„MVVM ä»€ä¹ˆæ˜¯MVVMï¼šç»´åŸºç™¾ç§‘MVVMã€‚ ï¼ˆéœ€è¦å†è¯¦ç»†é˜…è¯»ï¼‰ Vueçš„MVVMï¼šå›¾ä¸æ¸…æ¥šï¼Œéœ€è¦é‡æ–°æ‰¾ã€‚ åˆ›å»ºVueå®ä¾‹ä¼ å…¥çš„options el: string | HTML Element data: Object | Function (ç»„ä»¶ä¸­dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°) methods: { [key: string]: Function } ï¼ˆåé¢æ¢æˆES6çš„è¯­æ³•æ¥å†™ï¼‰ å¦ï¼š å¼€å‘ä¸­ä»€ä¹ˆå«æ–¹æ³•ï¼Œä»€ä¹ˆç§°ä¹‹ä¸ºå‡½æ•°ï¼Ÿ ç­”ï¼šéƒ½æ˜¯é€šè¿‡functionå®šä¹‰ï¼Œç±»é‡Œé¢å«æ–¹æ³•ï¼Œå®šä¹‰åœ¨å¤–é¢å«å‡½æ•°ã€‚ æ–¹æ³•ï¼šmethod å‡½æ•°ï¼šfunction Vueçš„ç”Ÿå‘½å‘¨æœŸï¼ˆç®€å•ç†è§£ä¸‹ï¼‰ å¦ï¼š å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šcreatedã€mountedã€‚ äºŒã€VueåŸºç¡€è¯­æ³• ä»£ç è§„èŒƒ å‰ç«¯å¼€å‘ï¼Œç¼©è¿›ä¸¤ä¸ªç©ºæ ¼æ›´åŠ åˆé€‚ã€‚ é‡å¤ä»£ç å»ºç«‹æ¨¡æ¿ å°†é‡å¤è¾“å…¥çš„å†…å®¹è®¾ç½®åˆ°æ¨¡æ¿å½“ä¸­ï¼Œåœ¨HTMLï¼ˆéœ€è¦è®¾ç½®ï¼‰ä¸­ç›´æ¥è¾“å…¥vueï¼Œç‚¹å‡»å›è½¦ï¼Œå°±å¯ä»¥è‡ªåŠ¨å¡«å……æ¨¡æ¿ä¸­çš„å†…å®¹ã€‚\næ’å€¼è¯­æ³• Mustacheè¯­æ³• ï¼ˆä¹Ÿå°±æ˜¯åŒå¤§æ‹¬å·ï¼Œç”¨çš„æœ€å¤šï¼‰â€» 1 2 3 4 5 6 7 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;!-- mustacheè¯­æ³•ä¸­ï¼Œä¸ä»…ä»…å¯ä»¥ç›´æ¥å†™å˜é‡ï¼Œä¹Ÿå¯ä»¥å†™ä¸€äº›ç®€å•çš„è¡¨è¾¾å¼--\u0026gt; \u0026lt;h2\u0026gt;{{firstName + \u0026#39; \u0026#39; + lastName}}\u0026lt;/h2\u0026gt; \u0026lt;h2\u0026gt;{{firstName}} {{lastName}}\u0026lt;/h2\u0026gt; \u0026lt;h2\u0026gt;{{counter * 2}}\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; v-onceæŒ‡ä»¤çš„ä½¿ç”¨ åªå±•ç¤ºä¸€æ¬¡ï¼Œåé¢ç½‘é¡µç•Œé¢å†…å®¹ä¸ä¼šéšç€messageå€¼çš„æ”¹å˜è€Œæ”¹å˜ã€‚ä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªh2æ ‡ç­¾æ˜¾ç¤ºçš„å†…å®¹ä¸ä¼šéšç€vueçš„appé‡Œé¢æ•°æ®æ”¹å˜ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨ï¼Œç‰¹æ®Šæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨ã€‚\n1 2 3 4 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;h2 v-once\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; v-htmlæŒ‡ä»¤çš„ä½¿ç”¨ æ•°æ®ä»¥HTMLå½¢å¼å±•ç¤ºã€‚ v-textæŒ‡ä»¤çš„ä½¿ç”¨ ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼Œæ²¡æœ‰åŒæ‹¬å·çµæ´»ï¼‰ v-preæŒ‡ä»¤çš„ä½¿ç”¨ ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰ å°†v-preè®¾ç½®çš„æ ‡ç­¾å†…å®¹åŸå°ä¸åŠ¨å±•ç¤ºï¼Œä¸è¿›è¡Œè§£æã€‚\n1 2 3 4 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;h2 v-pre\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; v-cloakæŒ‡ä»¤çš„ä½¿ç”¨ ï¼ˆåŸºæœ¬ä¸ç”¨ï¼‰ cloak: æ–—ç¯·ã€‚ clock: æ—¶é’Ÿã€‚\nå’Œcssæ ·å¼ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥å®ç°å½“JSè„šæœ¬æœªæ‰§è¡Œå®Œï¼Œä¸æ˜¾ç¤ºå†…å®¹ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºä¸€äº›æœªæ¸²æŸ“çš„â€œä¹±ç â€ï¼Œå¯¹ç”¨æˆ·å‹å¥½ã€‚\nv-bind v-bindä¹‹å‰éƒ½æ˜¯å°†æ•°æ®æ’åˆ°å†…å®¹ä¸­ï¼Œè€Œè¿™ä¸ªæ˜¯å°†å€¼æ’åˆ°æ ‡ç­¾çš„å±æ€§ä¸­ï¼Œæ¯”å¦‚imgæ ‡ç­¾çš„srcå±æ€§ï¼Œæ”¹å˜è¿™ä¸ªå±æ€§å€¼ã€‚åˆæ¯”å¦‚aæ ‡ç­¾çš„hrefå±æ€§ã€‚ä¸èƒ½ç”¨åŒæ‹¬å·è¯­æ³•æ“ä½œï¼ŒåŒæ‹¬å·æ˜¯åœ¨æ ‡ç­¾å†…å®¹ä¸­ä½¿ç”¨çš„ã€‚\nä½œç”¨ï¼šåŠ¨æ€ç»‘å®šæ ‡ç­¾å±æ€§ã€‚\nv-bindåŸºæœ¬ä½¿ç”¨ v-bindè¯­æ³•ç³– ï¼ˆç»å¸¸ç”¨ï¼‰â€» å°†v-bind:ç®€å†™æˆ:ã€‚\nv-bindåŠ¨æ€ç»‘å®šclasså±æ€§ å¯¹è±¡è¯­æ³•ï¼šclass = \u0026quot;\u0026quot; åŒå¼•å·é‡Œé¢æ˜¯ä¸ªå¯¹è±¡ã€‚ ï¼ˆç»å¸¸ç”¨ï¼‰â€» æ•°ç»„è¯­æ³• ï¼ˆå¾ˆå°‘ç”¨ï¼‰ 1 2 3 \u0026lt;h2 class=\u0026#34;title\u0026#34; :class=\u0026#34;[active, \u0026#39;line\u0026#39;]\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;!-- activeæ˜¯ä¸ªå˜é‡ï¼Œå®šä¹‰åœ¨dataä¸­--\u0026gt; v-bindåŠ¨æ€ç»‘å®šstyle å¯¹è±¡è¯­æ³•ï¼š:style=\u0026quot;{key(å±æ€§å): value(å±æ€§å€¼)}\u0026quot; åŒå¼•å·é‡Œé¢æ˜¯ä¸ªå¯¹è±¡ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;!-- \u0026lt;h2 :style=\u0026#34;{key(å±æ€§å): value(å±æ€§å€¼)}\u0026#34;\u0026gt;{{message}}\u0026lt;/h2\u0026gt;--\u0026gt; \u0026lt;h2 :style=\u0026#34;{fontSize: finalSize, color: finalColor}\u0026#34;\u0026gt;{{message}}\u0026lt;/h2\u0026gt; \u0026lt;!-- keyä¸éœ€è¦åŠ å•å¼•å·ï¼Œä½†æ˜¯valueè¦åŠ ï¼Œå¦åˆ™20pxå½“ä½œæˆå˜é‡äº† --\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;../js/vue.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; const app = new Vue({ el: \u0026#34;#app\u0026#34;, data: { message: \u0026#39;ä½ å¥½å‘€\u0026#39;, finalSize: \u0026#39;100px\u0026#39;, finalColor: \u0026#39;red\u0026#39; } }) \u0026lt;/script\u0026gt; æ•°ç»„è¯­æ³•ï¼š\u0026lt;div v-bind: style=\u0026quot;[basestyles, overridingstyles]\u0026quot;\u0026gt;/div\u0026gt; ï¼Œbasestyleså’Œoverridingstylesä¸ºå¯¹è±¡ ï¼ˆå¾ˆå°‘ç”¨ï¼‰ è®¡ç®—å±æ€§ computedï¼ˆå¾ˆé‡è¦ï¼‰â€» è®¡ç®—å±æ€§çš„ä½¿ç”¨ æ•°æ®å±•ç¤ºä¹‹å‰éœ€è¦ç»è¿‡ä¸€å®šçš„å¤„ç†ï¼Œcomputedé‡Œé¢ä¹Ÿæ˜¯å®šä¹‰çš„å‡½æ•°ï¼Œä½†æ˜¯ä¸è¦å‘½åä¸ºåŠ¨è¯ï¼Œä¸€èˆ¬å‘½åä¸ºåè¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;!-- \u0026lt;h2\u0026gt;{{firstName + \u0026#39; \u0026#39; + lastName}}\u0026lt;/h2\u0026gt;--\u0026gt; \u0026lt;!-- \u0026lt;h2\u0026gt;{{fullName()}}\u0026lt;/h2\u0026gt;--\u0026gt; \u0026lt;h2\u0026gt;{{fullName}}\u0026lt;/h2\u0026gt; \u0026lt;!-- ä¸éœ€è¦åŠ å‡½æ•°çš„æ‹¬å· --\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;../js/vue.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; const app = new Vue({ el: \u0026#34;#app\u0026#34;, data: { message: \u0026#39;ä½ å¥½å‘€\u0026#39;, firstName: \u0026#39;lebron\u0026#39;, lastName: \u0026#39;James\u0026#39; }, computed: { fullName: function () { return this.firstName + \u0026#39; \u0026#39; + this.lastName + \u0026#39; æ ¹æ®computedå¾—åˆ°çš„\u0026#39;; } }, methods: { // fullName: function () { // return this.firstName + \u0026#39; \u0026#39; + this.lastName; // } } }) \u0026lt;/script\u0026gt; åº”ç”¨åœºæ™¯: è´­ç‰©è½¦é€‰ä¸­å¤šä¸ªå•†å“ï¼Œè®¡ç®—æ€»ä»·æ ¼ã€‚\nå¦ï¼šè®¡ç®—å±æ€§åªè®¡ç®—ä¸€æ¬¡ï¼Œæœ‰ç¼“å­˜ï¼Œç›¸æ¯”methodè®¡ç®—é€Ÿåº¦æ›´å¿«ã€‚\nè®¡ç®—å±æ€§setterå’Œgetter è®¡ç®—å±æ€§å’Œmethodsçš„å¯¹æ¯” â€» è®¡ç®—å±æ€§å†…éƒ¨å®ç°ç¼“å­˜ï¼Œå¦‚æœå€¼ä¸æ”¹å˜ï¼Œç›´æ¥è°ƒç”¨ç¼“å­˜ä¸­çš„å†…å®¹ï¼Œè€Œmethodsæ¯æ¬¡éƒ½ä¼šè°ƒç”¨ï¼Œæ•ˆç‡æ¯”è®¡ç®—å±æ€§å·®\nè¡¥å……ï¼šES6è¯­æ³• let/var letæœ‰ifå’Œforå—çº§ä½œç”¨åŸŸï¼Œè€Œvaræ²¡æœ‰ifå’Œforå—çº§ä½œç”¨åŸŸã€‚\nconst æ ‡è¯†ç¬¦ä¿®é¥°ä¸ºå¸¸é‡ã€‚å®šä¹‰æ—¶å°±éœ€è¦èµ‹å€¼ã€‚å¯¹è±¡ä¸èƒ½ä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥æ”¹å˜å¯¹è±¡é‡Œé¢çš„å±æ€§ã€‚\nå¯¹è±¡çš„å­—é¢é‡å¢å¼ºå†™æ³• å±æ€§çš„å¢å¼ºå†™æ³• å‡½æ•°çš„å¢å¼ºå†™æ³• äº‹ä»¶ç›‘å¬ v-onçš„åŸºæœ¬ä½¿ç”¨ v-onè¯­æ³•ç³–ï¼š@\nv-onçš„å‚æ•° äº‹ä»¶ç›‘å¬çš„æ—¶å€™ï¼Œè‹¥ä¸éœ€è¦ä¼ å‚æ•°ï¼Œåˆ™å¯ä»¥ä¸å†™è°ƒç”¨çš„å°æ‹¬å·ã€‚ï¼ˆçœç•¥ï¼‰\nå¦‚ä½•ç»™äº‹ä»¶ç›‘å¬å‡½æ•°ä¼ å…¥ï¼Œæ¸¸è§ˆå™¨ç”Ÿæˆçš„eventå¯¹è±¡ï¼Ÿ\nä¼ å…¥çš„å‚æ•°ä¸º$eventå°±å¯ä»¥äº†ã€‚æ–¹æ³•å½¢å‚ä¸ºeventã€‚\nv-onçš„ä¿®é¥°ç¬¦ @click.stopé˜²æ­¢äº‹ä»¶å†’æ³¡ã€‚ @click.preventé˜»æ­¢é»˜è®¤è¡Œä¸ºçš„æ‰§è¡Œã€‚ @keyUp.enterç›‘å¬enteré”®çš„é‡Šæ”¾ã€‚ @click.onceåªç›‘å¬ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶ã€‚ å…³äºäº‹ä»¶ç›‘å¬å‚è€ƒ Vueäº‹ä»¶ç›‘å¬\næ¡ä»¶åˆ¤æ–­ v-ifçš„ä½¿ç”¨ å¦ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œv-else-ifã€v-elseä¸åœ¨HTMLæ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œé€»è¾‘ä¸æ”¾åœ¨ç•Œé¢ä»£ç å¤„ã€‚\nv-showçš„ä½¿ç”¨ å†³å®šæ ‡ç­¾æ˜¯å¦åœ¨ç•Œé¢æ˜¾ç¤ºï¼š\u0026lt;h2 v-show=\u0026quot;isShow\u0026quot;\u0026gt; \u0026lt;/h2\u0026gt;\nv-if å’Œ v-showçš„åŒºåˆ«ã€‚ ï¼ˆv-ifç»å¸¸ä½¿ç”¨ï¼‰\nv-ifï¼šå½“æ¡ä»¶ä¸ºfalseæ—¶ï¼ŒåŒ…å«v-ifæŒ‡ä»¤çš„å…ƒç´ ï¼Œæ ¹æœ¬ä¸ä¼šå­˜åœ¨domä¸­ã€‚è€Œv-showï¼šå½“æ¡ä»¶ä¸ºfalseæ—¶ï¼Œåªæ˜¯ç»™å…ƒç´ æ·»åŠ äº†ä¸€ä¸ªè¡Œå†…æ ·å¼ï¼šdisplayï¼šnoneã€‚å‰è€…domä¸­å–æ‰ï¼Œåè€…æ”¹æ ·å¼ã€‚å½“å±•ç¤ºåˆ‡æ¢é¢‘ç‡å¾ˆé«˜ï¼Œç”¨v-showã€‚\nå¾ªç¯éå†v-forçš„ä½¿ç”¨ éå†æ•°ç»„ â€» 1 \u0026lt;li v-for=\u0026#34;(item, index) in movies\u0026#34;\u0026gt;{{item}}\u0026lt;/li\u0026gt; éå†å¯¹è±¡ 1 2 3 4 5 \u0026lt;!-- è·å–åˆ°çš„æ˜¯value --\u0026gt; \u0026lt;li v-for=\u0026#34;item in info\u0026#34;\u0026gt;{{item}}\u0026lt;/li\u0026gt; \u0026lt;!-- è·å–åˆ°valueå’Œkey --\u0026gt; \u0026lt;li v-for=\u0026#34;(value, key) in info\u0026#34;\u0026gt;{{value}} {{key}}\u0026lt;/li\u0026gt; v-forç»‘å®škey çœç•¥ã€‚\næ•°ç»„ä¸­å“åº”å¼æ–¹æ³•ï¼šæ•°ç»„å†…å®¹æ”¹å˜ï¼Œå±•ç¤ºå†…å®¹è·Ÿç€æ”¹å˜ã€‚ push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()\nå¦:\nsplice() â€» letters[index] = \u0026lsquo;change\u0026rsquo; ç´¢å¼•æ–¹å¼æ”¹å˜æ•°ç»„æ˜¯éå“åº”å¼çš„ã€‚ ä¸Šé¢çš„æ–¹å¼å¯ä»¥æ”¹ç”¨ä¸ºvueå†…éƒ¨å®ç°çš„å‡½æ•°vue.set()ï¼Œæ›´æ¨èsplice()æ–¹å¼ã€‚ è¡¥å……ï¼šä¸‰ä¸ªé«˜é˜¶å‡½æ•° â€» filterã€reduceã€mapå‡½æ•°\nlet total = nums.filter(n =\u0026gt; n\u0026lt;100).map(n =\u0026gt; n * 2).reduce((pre, n) =\u0026gt; pre + n);\nv-modelåŒå‘ç»‘å®š ï¼ˆæš‚æ—¶è·³è¿‡ï¼‰ ä¸‰ã€ç»„ä»¶åŒ–å¼€å‘ â€» ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–ï¼Ÿ å°†å¤æ‚é—®é¢˜ï¼Œæ‹†åˆ†æˆå¾ˆå¤šä¸ªå°é—®é¢˜ã€‚å°†ä¸€ä¸ªé¡µé¢æ‹†åˆ†æˆä¸€ä¸ªä¸ªå°çš„åŠŸèƒ½å—ï¼Œæ¯ä¸ªåŠŸèƒ½å—å®Œæˆå±äºè‡ªå·±è¿™ä¸€éƒ¨åˆ†ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡µé¢çš„ç®¡ç†å’Œç»´æŠ¤å°±å˜å¾—éå¸¸å®¹æ˜“äº†ã€‚åº”ç”¨æœ€åæŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ã€‚\nç»„ä»¶åŒ–æ€æƒ³ ä»»ä½•çš„åº”ç”¨éƒ½ä¼šè¢«æŠ½è±¡æˆä¸€é¢—ç»„ä»¶æ ‘ã€‚ æœ‰äº†ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œæˆ‘ä»¬åœ¨ä¹‹åçš„å¼€å‘ä¸­å°±è¦å……åˆ†çš„åˆ©ç”¨å®ƒã€‚ å°½å¯èƒ½çš„å°†é¡µé¢æ‹†åˆ†æˆä¸€ä¸ªä¸ªå°çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚ è¿™æ ·è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ æ–¹ä¾¿ç»„ç»‡å’Œç®¡ç†ï¼Œå¹¶ä¸”æ‰©å±•æ€§ä¹Ÿæ›´å¼ºã€‚ ç»„ä»¶ä½¿ç”¨æ­¥éª¤ åˆ›å»ºç»„ä»¶æ„é€ å™¨ã€‚ æ³¨å†Œç»„ä»¶ã€‚ ä½¿ç”¨ç»„ä»¶ã€‚ å¦ï¼š\nå¼€å‘ä¸­ç”¨çš„æœ€å¤šçš„æ˜¯å±€éƒ¨ç»„ä»¶ã€‚ ä¸€èˆ¬åªåˆ›å»ºä¸€ä¸ªVueå®ä¾‹ã€‚ å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶ åœ¨Vueå®ä¾‹åˆ›å»ºä¹‹å¤–ï¼Œæ³¨å†Œçš„ç»„ä»¶ä¸ºå…¨å±€ç»„ä»¶ã€‚\n1 2 // æ³¨å†Œå…¨å±€ç»„ä»¶(å…¨å±€ç»„ä»¶, æ„å‘³ç€å¯ä»¥åœ¨å¤šä¸ªVueçš„å®ä¾‹ä¸‹é¢ä½¿ç”¨ï¼Œappï¼Œapp2) Vue.component(\u0026#39;cpn\u0026#39;, cpnC) åœ¨Vueå®ä¾‹åˆ›å»ºæ—¶ï¼Œæ³¨å†Œçš„ç»„ä»¶ä¸ºå±€éƒ¨ç»„ä»¶ã€‚ ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯å±€éƒ¨ç»„ä»¶ã€‚ â€» â€»\n1 2 3 4 5 6 7 8 9 10 11 const app = new Vue({ el: \u0026#39;#app\u0026#39;, data: { message: \u0026#39;ä½ å¥½å•Š\u0026#39; }, // å±€éƒ¨ç»„ä»¶ components: { // cpnä¸ºä½¿ç”¨ç»„ä»¶æ—¶çš„æ ‡ç­¾åï¼ŒcpnCä¸ºç»„ä»¶å®ä¾‹ cpn: cpnC } }) çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„åŒºåˆ« â€» â€» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 // 1.åˆ›å»ºç¬¬ä¸€ä¸ªç»„ä»¶æ„é€ å™¨(å­ç»„ä»¶)ï¼ŒVue.extend()è¯­æ³•å¾ˆå°‘è§äº† const cpnC1 = Vue.extend({ template: ` \u0026lt;div\u0026gt; \u0026lt;h2\u0026gt;æˆ‘æ˜¯æ ‡é¢˜1\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;æˆ‘æ˜¯å†…å®¹, å“ˆå“ˆå“ˆå“ˆ\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ` }) // 2.åˆ›å»ºç¬¬äºŒä¸ªç»„ä»¶æ„é€ å™¨(çˆ¶ç»„ä»¶) const cpnC2 = Vue.extend({ template: ` \u0026lt;div\u0026gt; \u0026lt;h2\u0026gt;æˆ‘æ˜¯æ ‡é¢˜2\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;æˆ‘æ˜¯å†…å®¹, å‘µå‘µå‘µå‘µ\u0026lt;/p\u0026gt; \u0026lt;cpn1\u0026gt;\u0026lt;/cpn1\u0026gt; \u0026lt;/div\u0026gt; `, components: { cpn1: cpnC1 } }) æ³¨å†Œç»„ä»¶çš„è¯­æ³•ç³–å†™æ³•ï¼ˆæ¨èå†™æ³•ï¼‰â€» â€» çœç•¥ Vue.extend()ï¼Œä½¿ç”¨è¯­æ³•ç³–å†™æ³•ã€‚ åé¢å†…å®¹è®²è§£ï¼Œå°†tepmlateæŠ½ç¦»å‡ºå»ï¼Œä»£ç ä¼šæ›´åŠ æ¸…æ™°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 Vue.component(\u0026#39;cpn1\u0026#39;, { template: ` \u0026lt;div\u0026gt; \u0026lt;h2\u0026gt;æˆ‘æ˜¯æ ‡é¢˜1\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;æˆ‘æ˜¯å†…å®¹, å“ˆå“ˆå“ˆå“ˆ\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ` }) // 2.æ³¨å†Œå±€éƒ¨ç»„ä»¶çš„è¯­æ³•ç³– const app = new Vue({ el: \u0026#39;#app\u0026#39;, data: { message: \u0026#39;ä½ å¥½å•Š\u0026#39; }, components: { \u0026#39;cpn2\u0026#39;: { template: ` \u0026lt;div\u0026gt; \u0026lt;h2\u0026gt;æˆ‘æ˜¯æ ‡é¢˜2\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;æˆ‘æ˜¯å†…å®¹, å‘µå‘µå‘µ\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ` } } }) æ¨¡æ¿çš„åˆ†ç¦»å†™æ³• ä¸ºä»€ä¹ˆç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°ï¼Ÿ â€» 1 2 3 4 5 6 7 8 9 10 // 1.æ³¨å†Œä¸€ä¸ªå…¨å±€ç»„ä»¶ Vue.component(\u0026#39;cpn\u0026#39;, { template: \u0026#39;#cpn\u0026#39;, // ç»„ä»¶æ•°æ® data() { return { title: \u0026#39;abc\u0026#39; } } }) Vueç»„ä»¶åº”è¯¥æœ‰è‡ªå·±ä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼Œä¸èƒ½è®¿é—®Vueå®ä¾‹ä¸­çš„æ•°æ®ã€‚ ç»„ä»¶å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªdataå±æ€§(å‡½æ•°)ï¼Œä¹Ÿå¯ä»¥æœ‰methodsç­‰å±æ€§ã€‚ è¿™ä¸ªdataå±æ€§å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å†…éƒ¨ä¿å­˜ç€æ•°æ®ï¼Œå¤šä¸ªç›¸åŒç»„ä»¶å„è‡ªä½¿ç”¨å„è‡ªçš„æ•°æ®ã€‚ \u0026lt;script\u0026gt;æ ‡ç­¾ \u0026lt;template\u0026gt;æ ‡ç­¾ çˆ¶å­ç»„ä»¶çš„é€šä¿¡ â€» â€» â€» çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ props (å¸¸ç”¨) â€» props : properties å±æ€§\né€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;!--\u0026lt;cpn v-bind:cmovies=\u0026#34;movies\u0026#34;\u0026gt;\u0026lt;/cpn\u0026gt;--\u0026gt; \u0026lt;!--\u0026lt;cpn cmovies=\u0026#34;movies\u0026#34; cmessage=\u0026#34;message\u0026#34;\u0026gt;\u0026lt;/cpn\u0026gt;--\u0026gt; \u0026lt;!-- v-bind --\u0026gt; \u0026lt;cpn :cmessage=\u0026#34;message\u0026#34; :cmovies=\u0026#34;movies\u0026#34;\u0026gt;\u0026lt;/cpn\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;template id=\u0026#34;cpn\u0026#34;\u0026gt; \u0026lt;div\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;item in cmovies\u0026#34;\u0026gt;{{item}}\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;h2\u0026gt;{{cmessage}}\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script src=\u0026#34;../js/vue.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; // çˆ¶ä¼ å­: props const cpn = { template: \u0026#39;#cpn\u0026#39;, // props: [\u0026#39;cmovies\u0026#39;, \u0026#39;cmessage\u0026#39;], è¿™ç§æœ‰äº›æ€ªï¼Œå­—ç¬¦ä¸²å±…ç„¶æ˜¯å˜é‡ï¼ props: { // 1.ç±»å‹é™åˆ¶ // cmovies: Array, // cmessage: String, // 2.æä¾›ä¸€äº›é»˜è®¤å€¼, ä»¥åŠå¿…ä¼ å€¼ cmessage: { type: String, default: \u0026#39;aaaaaaaa\u0026#39;, required: true }, // ç±»å‹æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶, é»˜è®¤å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•° js ä¸­å±æ€§å’Œå‡½æ•°çš„åŒºåˆ«ï¼Ÿï¼Ÿï¼Ÿ cmovies: { type: Array, default() { return [] } } }, data() { return {} }, methods: { } } const app = new Vue({ el: \u0026#39;#app\u0026#39;, data: { message: \u0026#39;ä½ å¥½å•Š\u0026#39;, movies: [\u0026#39;æµ·ç‹\u0026#39;, \u0026#39;æµ·è´¼ç‹\u0026#39;, \u0026#39;æµ·å°”å…„å¼Ÿ\u0026#39;] }, components: { cpn // å¯¹è±¡å­—é¢é‡å¢å¼º } }) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; é—®é¢˜ï¼š\nTODO\n1 \u0026lt;cpn :cmessage=\u0026#34;message\u0026#34; :cmovies=\u0026#34;movies\u0026#34;\u0026gt;\u0026lt;/cpn\u0026gt; å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ $emit events â€» é€šè¿‡äº‹ä»¶eventså‘çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ã€‚\nçœ‹åˆ°P61\nwebpackçš„ä»‹ç»ä¸å®‰è£… Node, Npm å’Œ webpack\nä»æœ¬è´¨ä¸Šæ¥è®²ï¼Œwebpackæ˜¯ä¸€ä¸ªç°ä»£çš„JavRScriptåº”ç”¨çš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚ webpackå…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒå°±æ˜¯è®©æˆ‘ä»¬å¯èƒ½è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ï¼Œå¹¶ä¸”ä¼šå¸®åŠ©æˆ‘ä»¬å¤„ç†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ã€‚ ä¸ä»…ä»…æ˜¯JavaScriptæ–‡ä»¶ï¼Œæˆ‘ä»¬çš„CSSã€å›¾ç‰‡ã€jsonæ–‡ä»¶ç­‰ç­‰åœ¨webpackä¸­éƒ½å¯ä»¥è¢«å½“åšæ¨¡å—æ¥ä½¿ç”¨ï¼ˆåœ¨åç»­æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼‰ã€‚ è®¤è¯†webpack webpackçš„å®‰è£… webpackçš„èµ·æ­¥ webpackçš„é…ç½® loaderçš„ä½¿ç”¨ Iwebpackä¸­é…ç½®Vue pluginçš„ä½¿ç”¨ æ­å»ºæœ¬åœ°æœåŠ¡å™¨ å››ã€Vue CLIè¯¦è§£ ï¼ˆè„šæ‰‹æ¶ï¼‰â€» äº”ã€vue-router å…­ã€Vuexè¯¦è§£ ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ ä¸ƒã€ç½‘ç»œå°è£… å…«ã€é¡¹ç›®å®æˆ˜ ä¸€æ­¥æ­¥å­¦ä¹ ï¼Œæ²¡ä»€ä¹ˆè€å¿ƒï¼Œé‚£å°±é¡¹ç›®é©±åŠ¨å­¦ä¹ å§ï¼Œå¼€å¹²ã€‚\nåˆ›å»ºé¡¹ç›® Vue CLIæ•™ç¨‹Vue CLI 1 2 sudo cnpm install -g vue-cli # å®‰è£… vue create supermall # åˆ›æ–°æ–°çš„é¡¹ç›® ç›®å½•ç»“æ„åˆ’åˆ† å‚è€ƒï¼šhttps://blog.csdn.net/weixin_42290927/article/details/94432587\nä¹ã€é¡¹ç›®éƒ¨ç½² åã€vuejsåŸç†ç›¸å…³ ","date":"2021-01-06T22:02:52Z","permalink":"https://qiyueliuhuo.github.io/posts/vue%E5%AD%A6%E4%B9%A0/","title":"Vueå­¦ä¹ "},{"content":"é˜…è¯»å¼€æºä»£ç æ˜¯æé«˜å†™ä»£ç èƒ½åŠ›æœ€å¥½çš„æ–¹å¼ä¹‹ä¸€ï¼Œç°åœ¨å…¥å‘æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œåœ¨ä¼—å¤šæ¡†æ¶ä¸­é€‰æ‹©pytorchæ¡†æ¶ä½œä¸ºè‡ªå·±åŸºæœ¬çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œç°åœ¨å¼€å§‹ä»æœ€ç®€å•çš„pytorchä»£ç éƒ¨åˆ†é˜…è¯»ï¼Œå­¦ä¹ ä¸‹pythonæŠ€å·§é¡ºä¾¿æ·±å…¥å­¦ä¹ ä¸‹ç¥ç»ç½‘ç»œçš„ä»£ç å®è·µã€‚\nå…³äºé˜…è¯»æºç ï¼Œæˆ‘ä¸€å¼€å§‹åœ¨é¡¹ç›®ä¸­è°ƒç”¨pytorchæ¨¡å—å’Œç±»ï¼Œé€šè¿‡pycharmè¿½è¸ªæºç ï¼Œåœ¨pycharmä¸­å¯ä»¥ç›´æ¥æŸ¥çœ‹ä¾èµ–åŒ…torchä¸­æºç ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä¸æ–¹ä¾¿é˜…è¯»torchæºç ï¼Œä¸€ä¸ªåŸå› æ˜¯pycharmä¸­æŸ¥çœ‹ä¾èµ–åŒ…çš„æºç å†…å®¹ï¼ŒæŸ¥çœ‹æºç æ–‡ä»¶çš„æ–¹å¼æ˜¯åªè¯»æ¨¡å¼ï¼Œæ²¡æ³•åœ¨é‡Œé¢æ³¨é‡Šä¸€äº›è‡ªå·±ç†è§£çš„ä¸œè¥¿ï¼Œå¦ä¸€ä¸ªåŸå› æ˜¯é€šè¿‡å•æ­¥è°ƒè¯•é˜…è¯»ä»£ç æ˜¯æœ€å®¹æ˜“ç†è§£ä»£ç çš„æ–¹å¼ï¼Œæƒ³äº†æƒ³pytorchæºç é‡Œé¢åº”è¯¥æœ‰å¯¹æºç çš„æµ‹è¯•ä»£ç å¯ä»¥ç›´æ¥è·‘èµ·æ¥ï¼Œç„¶åä¸€æ­¥æ­¥è¿è¡Œï¼Œè¿™æ ·çœ‹ç€æ›´æ–¹ä¾¿ã€‚\nä»githubä¸Šä¸‹è½½pytorchä»£ç ï¼Œé€šè¿‡CONTRIBUTING.mdæ–‡ä»¶ä¸­æŒ‡å¯¼ç¼–è¯‘æºç ï¼Œæ³¨æ„ä½¿ç”¨ï¼špython setup.py develop ä»¥å¼€å‘æ¨¡å¼æ„å»ºä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨æˆ‘çš„ç”µè„‘ä¸Šè¦è·‘å°†è¿‘ä¸¤å°æ—¶ã€‚ã€‚ã€‚å¿˜äº†ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘è·‘äº†ä¸¤æ¬¡ã€‚ã€‚ã€‚å››ä¸ªå°æ—¶æ²¡äº†(å‘œå‘œ\u0026hellip;) å…ˆä»åŠ è½½å’Œå¤„ç†æ•°æ®æºç äº†è§£ã€‚\næ³¨ï¼šç¬”è€…é˜…è¯»çš„pytorchç‰ˆæœ¬ä¸º1.7.0ï¼Œtorchvisionç‰ˆæœ¬ä¸º0.6\nDataset ç›¸å…³æºç  MNISTç±» ç±»ç»§æ‰¿å›¾ï¼š\nå…ˆæ¥çœ‹çœ‹æœ€å¸¸ç”¨çš„mnistæ•°æ®é›†çš„ä½¿ç”¨ï¼Œä¸‹é¢ä¸¤è¡Œä½¿ç”¨torchvisionä¸­æä¾›çš„MNISTæ•°æ®é›†ç±»å®šä¹‰äº†ä¸¤ä¸ªæ•°æ®é›†ç±»ï¼Œåˆ†åˆ«ä¸ºè®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦å®šä¹‰ä¸¤ä¸ªåŒæ ·çš„æ•°æ®é›†å‘¢ï¼Ÿå…¶ä¸­ä¸€ä¸ªå› ä¸ºæ˜¯è®­ç»ƒå’Œæµ‹è¯•ä½¿ç”¨çš„æ•°æ®é›†ä¸ä¸€æ ·ï¼›å¦ä¸€ä¸ªåŸå› æ˜¯è®­ç»ƒå’Œæµ‹è¯•æ—¶å€™å¯¹åº”çš„batch_sizeå¤§å°ä¸ä¸€æ ·ã€‚ä¸‹é¢è¿›ä¸€æ­¥åˆ†ædatasets.MNISTä»£ç ã€‚\n1 2 3 4 5 6 dataset1 = datasets.MNIST(\u0026#39;../data\u0026#39;, train=True, download=True, transform=transform) dataset2 = datasets.MNIST(\u0026#39;../data\u0026#39;, train=False, transform=transform) train_loader = torch.utils.data.DataLoader(dataset1,**train_kwargs) test_loader = torch.utils.data.DataLoader(dataset2, **test_kwargs) ä¸‹é¢çš„ä»£ç æ¥è‡ªtorchvision.datasets.mnistæ¨¡å—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 from .vision import VisionDataset import warnings from PIL import Image import os import os.path import numpy as np import torch import codecs import string from .utils import download_url, download_and_extract_archive, extract_archive, \\ verify_str_arg class MNIST(VisionDataset): resources = [ (\u0026#34;http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz\u0026#34;, \u0026#34;f68b3c2dcbeaaa9fbdd348bbdeb94873\u0026#34;), (\u0026#34;http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz\u0026#34;, \u0026#34;d53e105ee54ea40749a09fcbcd1e9432\u0026#34;), (\u0026#34;http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz\u0026#34;, \u0026#34;9fb629c4189551a2d022fa330f9573f3\u0026#34;), (\u0026#34;http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz\u0026#34;, \u0026#34;ec29112dd5afa0611ce80d1b7f02629c\u0026#34;) ] training_file = \u0026#39;training.pt\u0026#39; test_file = \u0026#39;test.pt\u0026#39; classes = [\u0026#39;0 - zero\u0026#39;, \u0026#39;1 - one\u0026#39;, \u0026#39;2 - two\u0026#39;, \u0026#39;3 - three\u0026#39;, \u0026#39;4 - four\u0026#39;, \u0026#39;5 - five\u0026#39;, \u0026#39;6 - six\u0026#39;, \u0026#39;7 - seven\u0026#39;, \u0026#39;8 - eight\u0026#39;, \u0026#39;9 - nine\u0026#39;] @property def train_labels(self): warnings.warn(\u0026#34;train_labels has been renamed targets\u0026#34;) return self.targets @property def test_labels(self): warnings.warn(\u0026#34;test_labels has been renamed targets\u0026#34;) return self.targets @property def train_data(self): warnings.warn(\u0026#34;train_data has been renamed data\u0026#34;) return self.data @property def test_data(self): warnings.warn(\u0026#34;test_data has been renamed data\u0026#34;) return self.data ç±»MNISTç»§æ‰¿è‡ªVisionDatasetï¼Œä»åç§°å¯ä»¥çŸ¥é“VisionDatasetæ˜¯å¯¹æµè¡Œçš„è§†è§‰æ•°æ®é›†çš„æŠ½è±¡ç±»ï¼Œæˆ‘ä»å­ç±»å¼€å§‹åˆ†æï¼Œåé¢å†é˜…è¯»åˆ†æVisionDatasetç±»ã€‚MNISTç±»å‰é¢å®šä¹‰äº†å››ä¸ªå±æ€§ï¼Œå…¶ä¸­training_fileã€test_fileä¿å­˜å°†åŸå§‹Minstæ•°æ®å¤„ç†ä¹‹åçš„tensoræ ¼å¼çš„è®­ç»ƒå’Œæµ‹è¯•æ•°æ®çš„æ–‡ä»¶åã€‚å¦å¤–æœ‰å››ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯train_labelsã€test_labelsã€train_dataã€test_dataï¼Œå®ƒä»¬éƒ½è¢«@propertyæ³¨è§£æ‰€ä¿®é¥°ï¼Œ@propertyè¿™ç§æ³¨è§£è£…é¥°å™¨æ¥åˆ›å»ºåªè¯»å±æ€§ï¼Œ@propertyè£…é¥°å™¨ä¼šå°†æ–¹æ³•è½¬æ¢ä¸ºç›¸åŒåç§°çš„åªè¯»å±æ€§ï¼Œå¯ä»¥ä¸æ‰€å®šä¹‰çš„å±æ€§é…åˆä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å±æ€§è¢«ä¿®æ”¹ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡mnist.train_labelså¾—åˆ°å®ä¾‹çš„ç§æœ‰å±æ€§ï¼Œè€Œå®é™…ä¸Šè¯¥è¿‡ç¨‹è°ƒç”¨çš„æ˜¯train_labels()å‡½æ•°ã€‚ä¸Šé¢éƒ¨åˆ†é™¤äº†@propertyå…¶ä»–çš„éƒ½å¾ˆå¥½ç†è§£äº†ã€‚ä¸‹é¢æ¥çœ‹è¿™ä¸ªç±»çš„å…¶ä½™éƒ¨åˆ†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 def __init__(self, root, train=True, transform=None, target_transform=None, download=False): super(MNIST, self).__init__(root, transform=transform, target_transform=target_transform) self.train = train # training set or test set if download: self.download() if not self._check_exists(): raise RuntimeError(\u0026#39;Dataset not found.\u0026#39; + \u0026#39; You can use download=True to download it\u0026#39;) if self.train: data_file = self.training_file else: data_file = self.test_file self.data, self.targets = torch.load(os.path.join(self.processed_folder, data_file)) def __getitem__(self, index): \u0026#34;\u0026#34;\u0026#34; Args: index (int): Index Returns: tuple: (image, target) where target is index of the target class. \u0026#34;\u0026#34;\u0026#34; img, target = self.data[index], int(self.targets[index]) # doing this so that it is consistent with all other datasets # to return a PIL Image img = Image.fromarray(img.numpy(), mode=\u0026#39;L\u0026#39;) # @3 if self.transform is not None: img = self.transform(img) # @1 if self.target_transform is not None: target = self.target_transform(target) # @2 return img, target def __len__(self): return len(self.data) __init__è¯¥ç±»çš„æ„é€ å™¨(constructor)å‡½æ•°å…¥å‚transformå’Œtarget_transformåˆ†åˆ«ä¼ å…¥å¯¹æ•°æ®å›¾åƒå’Œæ ‡ç­¾çš„é¢„å¤„ç†ï¼Œåœ¨@1å’Œ@2å¤„å¯ä»¥çœ‹åˆ°åœ¨æ¯ä¸€å¼ å›¾åƒè¿”å›å‰åˆ†åˆ«å¯¹å›¾åƒå’Œæ ‡ç­¾è¿›è¡Œç”¨æˆ·è‡ªå®šä¹‰é¢„å¤„ç†ã€‚ä¼ å…¥çš„trainå‚æ•°æ¥å†³å®šè¯¥MNISTçš„datasetä¼šè¿”å›è®­ç»ƒé›†oræµ‹è¯•é›†ä¸­çš„æ•°æ®ã€‚\n__getitem__æ ¹æ®python3ä¸­å®šä¹‰ï¼Œå¦‚æœåœ¨ç±»ä¸­å®šä¹‰äº†__getitem__()æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„å®ä¾‹å¯¹è±¡ï¼ˆå‡è®¾ä¸ºPï¼‰å°±å¯ä»¥ä»¥P[key]å½¢å¼å–å€¼ï¼Œå½“å®ä¾‹å¯¹è±¡åšP[key]è¿ç®—æ—¶ï¼Œå°±ä¼šè°ƒç”¨ç±»ä¸­çš„__getitem__()æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€ä¹Ÿå¾ˆæœ‰ç”¨çš„ç‰¹æ€§ã€‚å…·ä½“åˆ°è¿™ä¸ªç±»çš„keyä¸ºè®­ç»ƒæ ·æœ¬çš„idexä¸ºintç±»å‹ä»£è¡¨ç¬¬å‡ ä¸ªæ•°æ®æ ·æœ¬ã€‚åœ¨**@3**å¤„å°†å›¾åƒè½¬æˆPILå›¾åƒå¯¹è±¡ï¼Œè¯¥PILå¯¹è±¡æœ€ç»ˆä¼šé€šè¿‡transformé¢„å¤„ç†ä¸ºtonsorå¯¹è±¡ã€‚ç±»MNISTå‰©ä½™éƒ¨åˆ†æœ€ä¸»è¦å°±æ˜¯ä¸‹è½½downloadå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 @property def raw_folder(self): return os.path.join(self.root, self.__class__.__name__, \u0026#39;raw\u0026#39;) @property def processed_folder(self): return os.path.join(self.root, self.__class__.__name__, \u0026#39;processed\u0026#39;) @property def class_to_idx(self): return {_class: i for i, _class in enumerate(self.classes)} def _check_exists(self): return (os.path.exists(os.path.join(self.processed_folder, self.training_file)) and os.path.exists(os.path.join(self.processed_folder, self.test_file))) def download(self): \u0026#34;\u0026#34;\u0026#34;Download the MNIST data if it doesn\u0026#39;t exist in processed_folder already.\u0026#34;\u0026#34;\u0026#34; if self._check_exists(): # @4 return os.makedirs(self.raw_folder, exist_ok=True) os.makedirs(self.processed_folder, exist_ok=True) # download files for url, md5 in self.resources: filename = url.rpartition(\u0026#39;/\u0026#39;)[2] download_and_extract_archive(url, download_root=self.raw_folder, filename=filename, md5=md5) # process and save as torch files print(\u0026#39;Processing...\u0026#39;) training_set = ( read_image_file(os.path.join(self.raw_folder, \u0026#39;train-images-idx3-ubyte\u0026#39;)), read_label_file(os.path.join(self.raw_folder, \u0026#39;train-labels-idx1-ubyte\u0026#39;)) ) test_set = ( read_image_file(os.path.join(self.raw_folder, \u0026#39;t10k-images-idx3-ubyte\u0026#39;)), read_label_file(os.path.join(self.raw_folder, \u0026#39;t10k-labels-idx1-ubyte\u0026#39;)) ) with open(os.path.join(self.processed_folder, self.training_file), \u0026#39;wb\u0026#39;) as f: torch.save(training_set, f) with open(os.path.join(self.processed_folder, self.test_file), \u0026#39;wb\u0026#39;) as f: torch.save(test_set, f) print(\u0026#39;Done!\u0026#39;) def extra_repr(self): return \u0026#34;Split: {}\u0026#34;.format(\u0026#34;Train\u0026#34; if self.train is True else \u0026#34;Test\u0026#34;) downloadå‡½æ•°ä¸‹è½½åŸå§‹mnistæ•°æ®å¹¶å°†è®­ç»ƒå›¾åƒæ•°æ®ã€è®­ç»ƒæ ‡ç­¾æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªtraining_fileæ–‡ä»¶ä¸­ï¼Œå°†æµ‹è¯•å›¾åƒæ•°æ®ã€æµ‹è¯•æ ‡ç­¾æ•°æ®å­˜åœ¨test_fileæ–‡ä»¶ä¸­ï¼Œ@4å¤„å¯ä»¥çœ‹åˆ°å½“processed_folderç›®å½•ä¸‹å­˜åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé€šè¿‡ç½‘ç»œä¸‹è½½ï¼Œç›´æ¥è¯»å–æœ¬åœ°è®­ç»ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ã€‚å¦å¤–ï¼Œåƒdownload_and_extract_archiveå‡½æ•°çš„å…·ä½“å®ç°ï¼Œå¹¶æ²¡æœ‰åœ¨ä¸Šé¢ç»™å‡ºï¼Œè¿™ä¸ªå°±æ˜¯æ›´åŠ ç»†èŠ‚çš„ä»£ç å®ç°ï¼Œæ­¤æ¬¡ä»£ç é˜…è¯»ä¼šå¿½ç•¥å¾ˆå¤šå…·ä½“ç»†èŠ‚å®ç°ï¼Œä¸“æ³¨äºå¤§çš„æ¡†æ¶å®ç°ã€‚\nMNISTç±»ç»§æ‰¿è‡ªVisionDatasetç±»ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç±»ä¸­æŠ½è±¡å‡ºäº†å“ªäº›åŠŸèƒ½ã€‚\nVisionDatasetç±» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 class VisionDataset(data.Dataset): _repr_indent = 4 def __init__(self, root, transforms=None, transform=None, target_transform=None): if isinstance(root, torch._six.string_classes): root = os.path.expanduser(root) self.root = root has_transforms = transforms is not None has_separate_transform = transform is not None or target_transform is not None if has_transforms and has_separate_transform: raise ValueError(\u0026#34;Only transforms or transform/target_transform can \u0026#34; \u0026#34;be passed as argument\u0026#34;) # for backwards-compatibility @5 self.transform = transform self.target_transform = target_transform if has_separate_transform: transforms = StandardTransform(transform, target_transform) # @6 self.transforms = transforms def __getitem__(self, index): raise NotImplementedError def __len__(self): raise NotImplementedError def __repr__(self): head = \u0026#34;Dataset \u0026#34; + self.__class__.__name__ body = [\u0026#34;Number of datapoints: {}\u0026#34;.format(self.__len__())] if self.root is not None: body.append(\u0026#34;Root location: {}\u0026#34;.format(self.root)) body += self.extra_repr().splitlines() if hasattr(self, \u0026#34;transforms\u0026#34;) and self.transforms is not None: body += [repr(self.transforms)] lines = [head] + [\u0026#34; \u0026#34; * self._repr_indent + line for line in body] return \u0026#39;\\n\u0026#39;.join(lines) def _format_transform_repr(self, transform, head): lines = transform.__repr__().splitlines() return ([\u0026#34;{}{}\u0026#34;.format(head, lines[0])] + [\u0026#34;{}{}\u0026#34;.format(\u0026#34; \u0026#34; * len(head), line) for line in lines[1:]]) def extra_repr(self): return \u0026#34;\u0026#34; VisionDatasetç±»ä¸­åœ¨**@5å¤„æ³¨é‡Šå‘åå…¼å®¹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ„é€ å™¨ï¼ˆconstructorï¼‰çš„å…¥å‚æœ‰transformsã€transformã€target_transformä¸‰ä¸ªé¢„å¤„ç†å˜é‡ï¼Œé‚£ä¹ˆå“ªä¸€ç§æ˜¯æ–¹å¼æ˜¯é‡æ„åæ–°å¼•å…¥çš„é¢„å¤„ç†æ–¹å¼å‘¢ï¼Ÿå…¶å®ä»@6**å¤„å°±å¯ä»¥çŸ¥é“ï¼Œä¸ºäº†å…¼å®¹transformã€target_transformä¼ å…¥æ–¹å¼ï¼Œå°†å®ƒä»¬ä¸¤ä¸ªæ„é€ ä¸ºStandardTransformï¼Œä¹Ÿå°±æ˜¯è¯´é‡æ„åï¼Œå¸Œæœ›ç”¨transforms(æ³¨æ„æœ‰ä¸ªs)å…¥å‚å–ä»£åŸæœ‰çš„æ–¹å¼ã€‚å¹¶ä¸”ï¼Œæœºæ™ºçš„æˆ‘ï¼ˆå˜¿å˜¿ï¼‰é€šè¿‡æŸ¥çœ‹è¯¥æ–‡ä»¶çš„ä¿®æ”¹å†å²ï¼Œå¦‚ä¸‹å›¾ï¼Œå°±å¯ä»¥çœ‹åˆ°æºç ä½œè€…çš„é‡æ„çš„æ„å›¾ã€‚\nå†æ¥çœ‹çœ‹VisionDatasetç±»ä¸­__repr__()çš„ä½œç”¨ï¼Œç®€å•ç†è§£å°±æ˜¯ï¼Œpythonä¸­å®šä¹‰å½“è¾“å‡ºprint(instance)æ—¶ï¼Œç­‰åŒäºæ‰§è¡Œprint(instance.__repr__())ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡å®ç°è‡ªå·±çš„__repr__å‡½æ•°æ¥æ§åˆ¶æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ__repr__() ä¼šè¿”å›å’Œè°ƒç”¨è€…æœ‰å…³çš„ â€œç±»å+object at+å†…å­˜åœ°å€â€ä¿¡æ¯ã€‚å¦å¤–ï¼Œè‹¥è°ƒç”¨repr(instance)ä¹Ÿä¼šæ‰§è¡Œ__repr__()å‡½æ•°ã€‚\nVisionDatasetç±»ç»§æ‰¿è‡ªdata.Datasetç±»ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç±»ä¸­æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚\nDataset torch.utils.data.datasetæ¨¡å—ä¸­å®šä¹‰äº†å‡ ä¸ªæ•°æ®ç±»ï¼Œæ˜¯å¯¹pytorchæ­å»ºç¥ç»ç½‘ç»œè®­ç»ƒå’Œæµ‹è¯•æ‰€éœ€è¦çš„æ•°æ®é›†çš„å°è£…å’ŒæŠ½è±¡ã€‚å…¶ä¸­Datasetç±»æ˜¯æ‰€æœ‰æ•°æ®é›†ç±»çš„çˆ¶ç±»ï¼Œé‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªç±»ä¸­å®šä¹‰äº†ä»€ä¹ˆå†…å®¹å§~\nä¸‹é¢ä»£ç æ˜¯æˆ‘ä»pytorchæºä»£ç ä¸­æ‹·è´è¿‡æ¥çš„ï¼Œçœç•¥äº†ä¸€äº›æ¨¡å—å’Œç±»çš„å¯¼å…¥ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 T_co = TypeVar(\u0026#39;T_co\u0026#39;, covariant=True) T = TypeVar(\u0026#39;T\u0026#39;) class Dataset(Generic[T_co]): r\u0026#34;\u0026#34;\u0026#34;An abstract class representing a :class:`Dataset`. All datasets that represent a map from keys to data samples should subclass it. All subclasses should overwrite :meth:`__getitem__`, supporting fetching a data sample for a given key. Subclasses could also optionally overwrite :meth:`__len__`, which is expected to return the size of the dataset by many :class:`~torch.utils.data.Sampler` implementations and the default options of :class:`~torch.utils.data.DataLoader`. .. note:: :class:`~torch.utils.data.DataLoader` by default constructs a index sampler that yields integral indices. To make it work with a map-style dataset with non-integral indices/keys, a custom sampler must be provided. \u0026#34;\u0026#34;\u0026#34; def __getitem__(self, index) -\u0026gt; T_co: raise NotImplementedError def __add__(self, other: \u0026#39;Dataset[T_co]\u0026#39;) -\u0026gt; \u0026#39;ConcatDataset[T_co]\u0026#39;: return ConcatDataset([self, other]) å‰ä¸¤è¡Œå®šä¹‰ä¸¤ä¸ªç”¨æˆ·è‡ªå®šä¹‰æ³›å‹ï¼Œè¿™ç§æ³›å‹ç¼–ç¨‹è‡ªpython3.5èµ·å¼€å§‹å¼•å…¥åˆ°pythonä¸­ï¼Œæœ‰ç‚¹ç±»ä¼¼äºc++ä¸­æ³›å‹ç¼–ç¨‹ï¼ˆä¸æ€ä¹ˆç”¨ï¼Œå¿˜å¾—å·®ä¸å¤šäº†ï¼‰ï¼Œc++ä¸­æ³›å‹ä¼šåœ¨ç¼–è¯‘å™¨åšç±»å‹æ£€æŸ¥å’Œæ›¿æ¢ï¼Œå±äºå¼ºåˆ¶ç±»å‹æ£€æŸ¥ï¼Œè€Œåœ¨pythonä¸­å› ä¸ºpythonç±»å‹éƒ½æ˜¯å¼±ç±»å‹ï¼Œæ‰€ä»¥è¿™ç§æ³›å‹ç¼–ç¨‹æ›´å¤šçš„æ˜¯ç»™é™æ€ç±»å‹æ£€æµ‹å·¥å…·æä¾›è¯´æ˜ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨ä»£ç ç¼–å†™é˜¶æ®µæ­£ç¡®ä½¿ç”¨å’Œä¼ é€’pythonå˜é‡ã€‚ç›®å‰ï¼Œå…ˆå¿½ç•¥è¿™äº›æ³›å‹ç±»å‹ã€‚\nåœ¨Datasetç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ªåŸºæœ¬å‡½æ•°ï¼Œ__getitem__å®ç°key-valueç»“æ„ï¼Œ__add__å®šä¹‰ä¸¤ä¸ªæ•°æ®é›†å åŠ çš„æ“ä½œã€‚\nä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹torchvisionä¸­å…¶ä»–çš„datasetã€‚\nç±»ç»§æ‰¿å›¾ï¼š\nImageFolder ä¸‹é¢æºç æ‘˜æŠ„è‡ªtorchvision.datasets.folderæ¨¡å—ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 class ImageFolder(DatasetFolder): \u0026#34;\u0026#34;\u0026#34;A generic data loader where the images are arranged in this way: :: root/dog/xxx.png root/dog/xxy.png root/dog/xxz.png root/cat/123.png root/cat/nsdf3.png root/cat/asd932_.png Args: root (string): Root directory path. transform (callable, optional): A function/transform that takes in an PIL image and returns a transformed version. E.g, ``transforms.RandomCrop`` target_transform (callable, optional): A function/transform that takes in the target and transforms it. loader (callable, optional): A function to load an image given its path. is_valid_file (callable, optional): A function that takes path of an Image file and check if the file is a valid file (used to check of corrupt files) Attributes: classes (list): List of the class names. class_to_idx (dict): Dict with items (class_name, class_index). imgs (list): List of (image path, class_index) tuples \u0026#34;\u0026#34;\u0026#34; def __init__(self, root, transform=None, target_transform=None, loader=default_loader, is_valid_file=None): super(ImageFolder, self).__init__(root, loader, IMG_EXTENSIONS if is_valid_file is None else None, transform=transform, target_transform=target_transform, is_valid_file=is_valid_file) self.imgs = self.samples ImageFolderæ˜¯ä¸€ä¸ªé€šç”¨çš„å›¾åƒæ•°æ®é›†ç±»ï¼Œå®ƒè¦æ±‚æ•°æ®æŒ‰ç…§ï¼š\nroot/label01/xxx.png\nroot/label01/xxy.png\nroot/label01/xxz.png\nroot/label02/123.png\nroot/label02/nsdf3.png\nroot/label02/asd932_.png\nçš„æ ¼å¼å­˜æ”¾ã€‚è¿™æ˜¯åˆ†ç±»æ•°æ®é›†çš„æ•°æ®å’Œæ ‡ç­¾è¡¨ç¤ºçš„å¦ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ç›®å½•åå½“ä½œæ ‡ç­¾æ¥å­˜æ”¾å›¾åƒæ•°æ®ï¼Œå¯¹äºåˆ¶ä½œè‡ªå®šä¹‰æ•°æ®é›†è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚\nImageFolderç»§æ‰¿è‡ªDatasetFolderï¼Œä»åç§°å°±å¯ä»¥çŸ¥é“ImageFolderæ˜¯ç±»DatasetFolderçš„å…·ä½“åŒ–ï¼Œå®ƒåªç”¨æ¥å¤„ç†å›¾åƒæ•°æ®é›†ï¼Œä¸€èˆ¬å¤„ç†IMG_EXTENSIONS = ('.jpg', '.jpeg', '.png', '.ppm', '.bmp', '.pgm', '.tif', '.tiff', '.webp') ä¸­çš„å›¾åƒæ ¼å¼ã€‚ImageFolderè¯»å–æ•°æ®é›†åï¼Œå¾—åˆ°ä¸‰ä¸ªå±æ€§ï¼šclassesã€class_to_idxã€imgsã€‚\nSampler ç›¸å…³æºç  æºç ä½äº torch/utils/data/sampler.pyï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰Samplerç›¸å…³ç±»å‘¢ï¼Ÿæˆ‘è§‰å¾—å¯ä»¥è¿™æ ·ç†è§£ï¼šDatasetæ˜¯ä¸ºæ•°æ®çš„æ€»ä½“ï¼Œæ¯æ¬¡è®­ç»ƒæˆ–è€…æµ‹è¯•è¦ä»æ€»ä½“ä¸­éšæœºæˆ–é¡ºåºæŠ½å–ä¸€ä¸ªæ ·æœ¬æˆ–è€…ä¸€æ‰¹æ ·æœ¬ï¼Œé‚£ä¹ˆä¸åŒçš„Samplerå­ç±»å°±è¡¨ç¤ºä»æ•°æ®é›†ä¸­ä¸åŒçš„æŠ½å–æ–¹å¼ã€‚\nSamplerï¼šæ‰€æœ‰Samplerçš„çˆ¶ç±»ã€‚ SequentialSamplerï¼šé¡ºåºä¾æ¬¡è·å–ä¸‹æ ‡ã€‚ RandomSamplerï¼šä¹±åºè·å–ä¸‹æ ‡ã€‚ SubsetRandomSamplerï¼šæŸä¸ªå­é›†å†…ä¹±åºè·å–ä¸‹æ ‡ã€‚ WeightedRandomSamplerï¼šä¸ºæ¯ä¸ªæ ·æœ¬è®¾ç½®æƒé‡ï¼Œæƒé‡å¤§è¡¨ç¤ºè·å–æ¦‚ç‡é«˜ã€‚ BatchSamplerï¼šå³å°†è‹¥å¹²ä¸ªæ ·æœ¬å½¢æˆä¸€ä¸ªbatchã€‚ Sampler 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 class Sampler(Generic[T_co]): r\u0026#34;\u0026#34;\u0026#34;Base class for all Samplers. Every Sampler subclass has to provide an :meth:`__iter__` method, providing a way to iterate over indices of dataset elements, and a :meth:`__len__` method that returns the length of the returned iterators. .. note:: The :meth:`__len__` method isn\u0026#39;t strictly required by :class:`~torch.utils.data.DataLoader`, but is expected in any calculation involving the length of a :class:`~torch.utils.data.DataLoader`. \u0026#34;\u0026#34;\u0026#34; def __init__(self, data_source: Optional[Sized]) -\u0026gt; None: pass def __iter__(self) -\u0026gt; Iterator[T_co]: raise NotImplementedError # NOTE [ Lack of Default `__len__` in Python Abstract Base Classes ] # # Many times we have an abstract class representing a collection/iterable of # data, e.g., `torch.utils.data.Sampler`, with its subclasses optionally # implementing a `__len__` method. In such cases, we must make sure to not # provide a default implementation, because both straightforward default # implementations have their issues: # # + `return NotImplemented`: # Calling `len(subclass_instance)` raises: # TypeError: \u0026#39;NotImplementedType\u0026#39; object cannot be interpreted as an integer # # + `raise NotImplementedError()`: # This prevents triggering some fallback behavior. E.g., the built-in # `list(X)` tries to call `len(X)` first, and executes a different code # path if the method is not found or `NotImplemented` is returned, while # raising an `NotImplementedError` will propagate and and make the call # fail where it could have use `__iter__` to complete the call. # # Thus, the only two sensible things to do are # # + **not** provide a default `__len__`. # # + raise a `TypeError` instead, which is what Python uses when users call # a method that is not defined on an object. # (@ssnl verifies that this works on at least Python 3.7.) Samplerç±»æ˜¯æ‰€æœ‰Samplerçš„çˆ¶ç±»ï¼Œç±»ä¸­__init__è¯¥ç±»çš„æ„é€ å™¨(constructor)å‡½æ•°ï¼Œ__iter__æä¾›è¿­ä»£æ•°æ®é›†å…ƒç´ ç´¢å¼•çš„æ–¹æ³•ã€‚\nDataLoaderç›¸å…³æºç  æºç ä½äºpytorchæºç ç›®å½•çš„torch/utils/data/dataloader.pyï¼ŒDataLoaderç±»éå¸¸é‡è¦ï¼Œå®ƒæ˜¯æˆ‘ä»¬ä½œä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒä¸å¼€å‘è¿‡ç¨‹ä¸­ç›´æ¥ç”¨åˆ°çš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€šè¿‡å®ƒæ¥å°†æˆ‘ä»¬çš„æ•°æ®é›†æ•°æ®åŠ è½½åˆ°ç¨‹åºä¸­ï¼Œé€šå¸¸æ˜¯ç”¨ä¸€ä¸ªforå¾ªç¯éå†å®ƒï¼ŒDataLoaderç±»ä¾èµ–Datasetç±»å’ŒSamplerç±»åœ¨å†…éƒ¨ä¸ºæˆ‘ä»¬å®ç°äº†å¾ˆå¤šæ•°æ®é›†éå†çš„æ–¹å¼ï¼Œæ–¹ä¾¿äºå¤šç§åœºæ™¯ä¸‹ä½¿ç”¨ã€‚\nåˆ†æDataLoaderç±»ä¹‹å‰ï¼Œæˆ‘å…ˆåœ¨ä¹‹å‰å­¦ä¹ pytorchçš„å­¦ä¹ ææ–™ä¸­ï¼Œæ‘˜æŠ„äº†ä¸€éƒ¨åˆ†ä½¿ç”¨DataLoaderçš„ä»£ç ï¼Œå…ˆçœ‹çœ‹å…·ä½“å¦‚ä½•ä½¿ç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 trainset = torchvision.datasets.CIFAR10(root=\u0026#39;./data\u0026#39;, train=True, download=True, transform=transform) trainloader = torch.utils.data.DataLoader(trainset, batch_size=4, shuffle=True, num_workers=2) # ... çœç•¥éƒ¨åˆ†ä»£ç  # è®­ç»ƒç½‘ç»œ for epoch in range(2): # loop over the dataset multiple times running_loss = 0.0 for i, data in enumerate(trainloader, 0): # get the inputs inputs, labels = data # zero the parameter gradients optimizer.zero_grad() # forward + backward + optimize outputs = net(inputs) loss = criterion(outputs, labels) loss.backward() optimizer.step() # print statistics running_loss += loss.item() if i % 2000 == 1999: # print every 2000 mini-batches print(\u0026#39;[%d, %5d] loss: %.3f\u0026#39; % (epoch + 1, i + 1, running_loss / 2000)) running_loss = 0.0 print(\u0026#39;Finished Training\u0026#39;) ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨Datasetå’ŒDataLoaderå¾ˆæ–¹ä¾¿åœ°ä¸ºæ¨¡å‹è®­ç»ƒæä¾›æ•°æ®åŠ è½½ã€æ‰“ä¹±ã€é¢„å¤„ç†ã€ç”šè‡³æ˜¯å¤šè¿›ç¨‹åŠ è½½ã€‚ä½œä¸ºpytorchçš„ä½¿ç”¨è€…ï¼Œå‡†ç¡®è¯¦ç»†çš„äº†è§£pytorchå„ç§åŒ…ï¼Œå¯ä»¥ç†Ÿç»ƒå¿«é€Ÿå¼€å‘æˆ‘ä»¬è‡ªå·±çš„è®­ç»ƒç¨‹åºï¼Œä¸‹é¢å…ˆå…·ä½“åˆ†æä¸‹DataLoaderçš„æ¥å£ã€‚\næºç æ¯”è¾ƒé•¿ï¼Œæˆ‘åˆ†æè¿™æ ·æ¯”è¾ƒé•¿çš„æºç ï¼Œå°†æ¯”è¾ƒç®€å•éƒ¨åˆ†çš„ä»£ç è§£é‡Šç›´æ¥å†™åœ¨æºç é‡Œï¼Œä½œä¸ºæ³¨é‡Šï¼›å°†å¤æ‚éƒ¨åˆ†é€šè¿‡@ç¬¦å·æ ‡æ³¨ï¼Œç„¶ååœ¨æºç åé¢éƒ¨åˆ†åˆ†æã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 class DataLoader(Generic[T_co]): r\u0026#34;\u0026#34;\u0026#34; åŸæ³¨é‡Šçœç•¥ã€‚ \u0026#34;\u0026#34;\u0026#34; dataset: Dataset[T_co] batch_size: Optional[int] num_workers: int pin_memory: bool drop_last: bool timeout: float sampler: Sampler prefetch_factor: int _iterator : Optional[\u0026#39;_BaseDataLoaderIter\u0026#39;] __initialized = False def __init__(self, dataset: Dataset[T_co], batch_size: Optional[int] = 1, shuffle: bool = False, sampler: Optional[Sampler[int]] = None, batch_sampler: Optional[Sampler[Sequence[int]]] = None, num_workers: int = 0, collate_fn: _collate_fn_t = None, pin_memory: bool = False, drop_last: bool = False, timeout: float = 0, worker_init_fn: _worker_init_fn_t = None, multiprocessing_context=None, generator=None, *, prefetch_factor: int = 2, persistent_workers: bool = False): torch._C._log_api_usage_once(\u0026#34;python.data_loader\u0026#34;) # type: ignore if num_workers \u0026lt; 0: raise ValueError(\u0026#39;num_workers option should be non-negative; \u0026#39; \u0026#39;use num_workers=0 to disable multiprocessing.\u0026#39;) if timeout \u0026lt; 0: raise ValueError(\u0026#39;timeout option should be non-negative\u0026#39;) if num_workers == 0 and prefetch_factor != 2: raise ValueError(\u0026#39;prefetch_factor option could only be specified in multiprocessing.\u0026#39; \u0026#39;let num_workers \u0026gt; 0 to enable multiprocessing.\u0026#39;) assert prefetch_factor \u0026gt; 0 if persistent_workers and num_workers == 0: raise ValueError(\u0026#39;persistent_workers option needs num_workers \u0026gt; 0\u0026#39;) self.dataset = dataset self.num_workers = num_workers self.prefetch_factor = prefetch_factor self.pin_memory = pin_memory self.timeout = timeout self.worker_init_fn = worker_init_fn self.multiprocessing_context = multiprocessing_context # Arg-check dataset related before checking samplers because we want to # tell users that iterable-style datasets are incompatible with custom # samplers first, so that they don\u0026#39;t learn that this combo doesn\u0026#39;t work # after spending time fixing the custom sampler errors. if isinstance(dataset, IterableDataset): self._dataset_kind = _DatasetKind.Iterable # NOTE [ Custom Samplers and IterableDataset ] # # `IterableDataset` does not support custom `batch_sampler` or # `sampler` since the key is irrelevant (unless we support # generator-style dataset one day...). # # For `sampler`, we always create a dummy sampler. This is an # infinite sampler even when the dataset may have an implemented # finite `__len__` because in multi-process data loading, naive # settings will return duplicated data (which may be desired), and # thus using a sampler with length matching that of dataset will # cause data lost (you may have duplicates of the first couple # batches, but never see anything afterwards). Therefore, # `Iterabledataset` always uses an infinite sampler, an instance of # `_InfiniteConstantSampler` defined above. # # A custom `batch_sampler` essentially only controls the batch size. # However, it is unclear how useful it would be since an iterable-style # dataset can handle that within itself. Moreover, it is pointless # in multi-process data loading as the assignment order of batches # to workers is an implementation detail so users can not control # how to batchify each worker\u0026#39;s iterable. Thus, we disable this # option. If this turns out to be useful in future, we can re-enable # this, and support custom samplers that specify the assignments to # specific workers. if shuffle is not False: raise ValueError( \u0026#34;DataLoader with IterableDataset: expected unspecified \u0026#34; \u0026#34;shuffle option, but got shuffle={}\u0026#34;.format(shuffle)) elif sampler is not None: # See NOTE [ Custom Samplers and IterableDataset ] raise ValueError( \u0026#34;DataLoader with IterableDataset: expected unspecified \u0026#34; \u0026#34;sampler option, but got sampler={}\u0026#34;.format(sampler)) elif batch_sampler is not None: # See NOTE [ Custom Samplers and IterableDataset ] raise ValueError( \u0026#34;DataLoader with IterableDataset: expected unspecified \u0026#34; \u0026#34;batch_sampler option, but got batch_sampler={}\u0026#34;.format(batch_sampler)) else: self._dataset_kind = _DatasetKind.Map if sampler is not None and shuffle: raise ValueError(\u0026#39;sampler option is mutually exclusive with \u0026#39; \u0026#39;shuffle\u0026#39;) if batch_sampler is not None: # auto_collation with custom batch_sampler if batch_size != 1 or shuffle or sampler is not None or drop_last: raise ValueError(\u0026#39;batch_sampler option is mutually exclusive \u0026#39; \u0026#39;with batch_size, shuffle, sampler, and \u0026#39; \u0026#39;drop_last\u0026#39;) batch_size = None drop_last = False elif batch_size is None: # no auto_collation if drop_last: raise ValueError(\u0026#39;batch_size=None option disables auto-batching \u0026#39; \u0026#39;and is mutually exclusive with drop_last\u0026#39;) if sampler is None: # give default samplers if self._dataset_kind == _DatasetKind.Iterable: # See NOTE [ Custom Samplers and IterableDataset ] sampler = _InfiniteConstantSampler() else: # map-style if shuffle: # Cannot statically verify that dataset is Sized # Somewhat related: see NOTE [ Lack of Default `__len__` in Python Abstract Base Classes ] sampler = RandomSampler(dataset, generator=generator) # type: ignore else: sampler = SequentialSampler(dataset) if batch_size is not None and batch_sampler is None: # auto_collation without custom batch_sampler batch_sampler = BatchSampler(sampler, batch_size, drop_last) self.batch_size = batch_size self.drop_last = drop_last self.sampler = sampler self.batch_sampler = batch_sampler self.generator = generator if collate_fn is None: if self._auto_collation: collate_fn = _utils.collate.default_collate else: collate_fn = _utils.collate.default_convert self.collate_fn = collate_fn self.persistent_workers = persistent_workers self.__initialized = True self._IterableDataset_len_called = None # See NOTE [ IterableDataset and __len__ ] self._iterator = None def _get_iterator(self) -\u0026gt; \u0026#39;_BaseDataLoaderIter\u0026#39;: if self.num_workers == 0: return _SingleProcessDataLoaderIter(self) else: return _MultiProcessingDataLoaderIter(self) @property def multiprocessing_context(self): return self.__multiprocessing_context @multiprocessing_context.setter def multiprocessing_context(self, multiprocessing_context): if multiprocessing_context is not None: if self.num_workers \u0026gt; 0: if not multiprocessing._supports_context: raise ValueError(\u0026#39;multiprocessing_context relies on Python \u0026gt;= 3.4, with \u0026#39; \u0026#39;support for different start methods\u0026#39;) if isinstance(multiprocessing_context, string_classes): valid_start_methods = multiprocessing.get_all_start_methods() if multiprocessing_context not in valid_start_methods: raise ValueError( (\u0026#39;multiprocessing_context option \u0026#39; \u0026#39;should specify a valid start method in {!r}, but got \u0026#39; \u0026#39;multiprocessing_context={!r}\u0026#39;).format(valid_start_methods, multiprocessing_context)) # error: Argument 1 to \u0026#34;get_context\u0026#34; has incompatible type \u0026#34;Union[str, bytes]\u0026#34;; expected \u0026#34;str\u0026#34; [arg-type] multiprocessing_context = multiprocessing.get_context(multiprocessing_context) # type: ignore if not isinstance(multiprocessing_context, python_multiprocessing.context.BaseContext): raise TypeError((\u0026#39;multiprocessing_context option should be a valid context \u0026#39; \u0026#39;object or a string specifying the start method, but got \u0026#39; \u0026#39;multiprocessing_context={}\u0026#39;).format(multiprocessing_context)) else: raise ValueError((\u0026#39;multiprocessing_context can only be used with \u0026#39; \u0026#39;multi-process loading (num_workers \u0026gt; 0), but got \u0026#39; \u0026#39;num_workers={}\u0026#39;).format(self.num_workers)) self.__multiprocessing_context = multiprocessing_context def __setattr__(self, attr, val): if self.__initialized and attr in ( \u0026#39;batch_size\u0026#39;, \u0026#39;batch_sampler\u0026#39;, \u0026#39;sampler\u0026#39;, \u0026#39;drop_last\u0026#39;, \u0026#39;dataset\u0026#39;, \u0026#39;persistent_workers\u0026#39;): raise ValueError(\u0026#39;{} attribute should not be set after {} is \u0026#39; \u0026#39;initialized\u0026#39;.format(attr, self.__class__.__name__)) super(DataLoader, self).__setattr__(attr, val) # We quote \u0026#39;_BaseDataLoaderIter\u0026#39; since it isn\u0026#39;t defined yet and the definition can\u0026#39;t be moved up # since \u0026#39;_BaseDataLoaderIter\u0026#39; references \u0026#39;DataLoader\u0026#39;. def __iter__(self) -\u0026gt; \u0026#39;_BaseDataLoaderIter\u0026#39;: # When using a single worker the returned iterator should be # created everytime to avoid reseting its state # However, in the case of a multiple workers iterator # the iterator is only created once in the lifetime of the # DataLoader object so that workers can be reused if self.persistent_workers and self.num_workers \u0026gt; 0: if self._iterator is None: self._iterator = self._get_iterator() else: self._iterator._reset(self) return self._iterator else: return self._get_iterator() @property def _auto_collation(self): return self.batch_sampler is not None @property def _index_sampler(self): # The actual sampler used for generating indices for `_DatasetFetcher` # (see _utils/fetch.py) to read data at each time. This would be # `.batch_sampler` if in auto-collation mode, and `.sampler` otherwise. # We can\u0026#39;t change `.sampler` and `.batch_sampler` attributes for BC # reasons. if self._auto_collation: return self.batch_sampler else: return self.sampler def __len__(self) -\u0026gt; int: if self._dataset_kind == _DatasetKind.Iterable: # NOTE [ IterableDataset and __len__ ] # # For `IterableDataset`, `__len__` could be inaccurate when one naively # does multi-processing data loading, since the samples will be duplicated. # However, no real use case should be actually using that behavior, so # it should count as a user error. We should generally trust user # code to do the proper thing (e.g., configure each replica differently # in `__iter__`), and give us the correct `__len__` if they choose to # implement it (this will still throw if the dataset does not implement # a `__len__`). # # To provide a further warning, we track if `__len__` was called on the # `DataLoader`, save the returned value in `self._len_called`, and warn # if the iterator ends up yielding more than this number of samples. # Cannot statically verify that dataset is Sized length = self._IterableDataset_len_called = len(self.dataset) # type: ignore if self.batch_size is not None: # IterableDataset doesn\u0026#39;t allow custom sampler or batch_sampler from math import ceil if self.drop_last: length = length // self.batch_size else: length = ceil(length / self.batch_size) return length else: return len(self._index_sampler) ","date":"2020-12-05T23:21:34Z","permalink":"https://qiyueliuhuo.github.io/posts/pytorch%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E4%B8%80/","title":"Pytorchæºç é˜…è¯»(ä¸€)ï¼šDatasetå’ŒDataLoader"},{"content":"\nå‰è¨€ æ”¯æŒå‘é‡æœºå³Support Vector Machineï¼Œç®€ç§°SVMã€‚æˆ‘æœ€å¼€å§‹å¬è¯´è¿™ä¸ªæœºå™¨çš„æ—¶å€™ï¼Œä¸€å¤´é›¾æ°´ï¼Œâ€œæ”¯æŒâ€ï¼Œâ€œå‘é‡â€ï¼Œâ€œæœºâ€ï¼Œè¿™ä¸‰ä¸ªè¯ç»„åˆåœ¨ä¸€èµ·è®©æˆ‘åœ¨ä¸€å¼€å§‹è§‰å¾—è¿™ä¸ªä¸œè¥¿å¥½æŠ½è±¡ã€‚é¦–å…ˆï¼ŒSVMå®é™…ä¸Šæ˜¯ä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è§£å†³å›å½’é—®é¢˜ã€‚äº†è§£è¿‡ä¸€äº›åŸç†åï¼Œæˆ‘è§‰å¾—è¿™ç§æ¨¡å‹ï¼ˆæ–¹æ³•ï¼‰è¢«ç§°ä¸ºVector Support Machineæ›´å¥½ä¸€äº›ï¼Œç®€å•ä¸”ä¸ä¸¥è°¨çš„ç†è§£æ˜¯: è¿™ç§æ¨¡å‹é€šè¿‡æŸäº›å‘é‡ï¼ˆé«˜ç»´ç©ºé—´ä¸­çš„ç‚¹ï¼‰æ”¯æŒï¼ˆæ”¯æ’‘ï¼‰è€Œå½¢æˆçš„ä¸€ç§æœºå™¨ï¼ˆæ–¹æ³•ï¼‰ï¼Œæˆ–è€…ç§°ä¹‹ä¸ºæ¨¡å‹ã€‚\nå¼•ç”¨Free Mindåœ¨ä»‹ç»SVMä¸­ä¸€å¥è¯ï¼šâ€œSVM ä¸€ç›´è¢«è®¤ä¸ºæ˜¯æ•ˆæœæœ€å¥½çš„ç°æˆå¯ç”¨çš„åˆ†ç±»ç®—æ³•ä¹‹ä¸€ï¼ˆå…¶å®æœ‰å¾ˆå¤šäººéƒ½ç›¸ä¿¡ï¼Œâ€œä¹‹ä¸€â€æ˜¯å¯ä»¥å»æ‰çš„ï¼‰â€ã€‚åˆšå¼€å§‹æ¥è§¦æœºå™¨å­¦ä¹ ï¼ˆå¤§åŠå¹´ğŸ¤¦â€â™‚ï¸ï¼‰ï¼Œç›®å‰æ²¡æœ‰åšå¤ªå¤šå®è·µï¼Œå¹¶ä¸æ¸…æ¥šSVMçš„æ•ˆæœæœ‰å¤šå¥½ï¼Œåé¢åº”è¯¥å¤šäº†è§£äº›SVMçš„å®é™…åº”ç”¨ã€‚\næ”¯æŒå‘é‡æœºåŸç† ç°åœ¨æœ‰ä¸€äº›æ•°æ®$\\mathbf{x}={\\boldsymbol{x_1}, \\boldsymbol{x_2}, \\boldsymbol{x_3}, \u0026hellip;, \\boldsymbol{x_n}}$ï¼Œè¿™äº›æ•°æ®çš„æ ‡ç­¾ä¹Ÿå·²çŸ¥$\\mathbf{y}={y_1, y_2, y_3, \u0026hellip;, y_n}$ã€‚å…¶ä¸­æ¯ä¸ªæ•°æ®$\\boldsymbol{x_i}$ä¸ºæœ‰ä¸¤ä¸ªç‰¹å¾å€¼ï¼Œå³$\\boldsymbol{x_i} = (x_{i1}, x_{i2})$ï¼Œä¸ºäºŒç»´ç©ºé—´ä¸Šçš„ä¸€ç‚¹ï¼Œæ ‡ç­¾$y_i\\in{-1, +1}$ï¼Œä¸€èˆ¬æˆ‘ä»¬å°†$+1$ç§°ä½œæ­£ç±»ï¼Œå°†$-1$ç§°ä¸ºè´Ÿç±»ã€‚è¿™é‡Œå‡è®¾$\\boldsymbol{x_i}$åªæœ‰ä¸¤ä¸ªç‰¹å¾å€¼æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨äºŒç»´åæ ‡ä¸­å°†æ•°æ®è¡¨ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿ç†è§£ã€‚æ›´ä¸€èˆ¬åœ°ï¼Œ$\\boldsymbol{x}_{i} \\in \\mathbb{R}^{n}$ï¼Œå³æ¯ä¸ªæ•°æ®æœ‰$n$ä¸ªç‰¹å¾å€¼ï¼Œæ¯ä¸ªæ•°æ®éƒ½æ˜¯$n$ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ã€‚\nä¸‹å›¾åœ¨äºŒç»´åæ ‡ç³»ä¸­å°†è¿™äº›æ•°æ®è¡¨ç¤ºå‡ºæ¥ï¼Œå…¶ä¸­çº¢è‰²ä»£è¡¨æ­£ç±»ï¼Œè“è‰²ä»£è¡¨è´Ÿç±»ã€‚ å¯èƒ½æœ‰äººè¦é—®äº†ï¼šä¸ºä»€ä¹ˆè¿™äº›ç‚¹åˆ†å¸ƒçš„å¾ˆæœ‰è§„å¾‹ï¼ˆç‰¹ç‚¹ï¼‰ï¼Ÿå³æ­£ç±»çš„è¿™äº›çº¢è‰²ç‚¹éƒ½åˆ†å¸ƒåœ¨ä¸€è¾¹ï¼Œè€Œè“è‰²çš„è¿™äº›æ•°æ®ç‚¹åˆ†å¸ƒåœ¨å¦å¤–ä¸€è¾¹ã€‚çš„ç¡®ï¼Œç°å®ä¸­çš„æ•°æ®å¾€å¾€ä¸ä¼šè¿™ä¹ˆç†æƒ³ï¼Œå¯èƒ½ä¼šæ˜¯ä¸¤éƒ¨åˆ†æ•°æ®äº¤å‰åœ¨ä¸€èµ·ï¼Œå¹¶ä¸æ˜¯ç›´è§‚ä¸Šé‚£ä¹ˆæ˜æ˜¾çš„åˆ†ä¸ºä¸¤è¾¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä»æœ€ç®€å•çš„åŸæ•°æ®çº¿æ€§å¯åˆ†çš„é—®é¢˜å…¥æ‰‹ï¼Œæ‰€ä»¥å…ˆå‡è®¾æ•°æ®æ¯”è¾ƒç†æƒ³ã€‚ä¹‹åæˆ‘ä»¬ä¼šæ…¢æ…¢ä»‹ç»ä¸€äº›å¤æ‚æ•°æ®çš„æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚\né‚£ä¹ˆå¦‚æœæœ‰ä¸Šå›¾ä¸€äº›è¾ƒä¸ºç†æƒ³çš„æ•°æ®ï¼Œéœ€è¦å¯»æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§è¾¹ç•Œå°†å®ƒä»¬åˆ’åˆ†å¼€æ¥ï¼Œå¦‚ä½•æ‰¾åˆ°è¿™ä¸ªçº¿æ€§è¾¹ç•Œå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜å¤§æ¦‚å°å­¦ç”Ÿä¹Ÿèƒ½åšåˆ°ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬åœ¨çº¢è‰²æ•°æ®ç‚¹å’Œè“è‰²æ•°æ®ç‚¹ä¹‹é—´ç”»ä¸€æ¡ç›´çº¿ï¼Œä½¿å¾—ä¸¤ç±»ç‚¹åˆ†å‰²åˆ°ç›´çº¿çš„ä¸¤è¾¹ï¼Œè¿™æ¡ç›´çº¿æ˜¾ç„¶å°±æ˜¯ä¸€ä¸ªçº¿æ€§è¾¹ç•Œï¼Œå¹¶ä¸”å¯ä»¥æ­£ç¡®åœ°å°†æ‰€ç»™çš„æ•°æ®é›†åˆ†ä¸ºä¸¤ç±»ã€‚ ç„¶è€Œï¼Œæˆ–è®¸ä½ æƒ³è¯´ä½ ç”»å‡ºæ¥çš„ç›´çº¿å’Œä¸Šå›¾ä¸ä¸€æ ·ï¼Œå®ƒæˆ–è®¸æ˜¯ä¸‹å›¾ä¸­çš„æŸä¸€æ¡ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°è¿™æ ·çš„ç›´çº¿æœ‰æ— æ•°æ¡ã€‚ç”¨è¿™äº›ç›´çº¿å¯¹äºå·²çŸ¥çš„ä¸Šå›¾æ•°æ®åˆ†ç±»ï¼Œå®ƒä»¬çš„ç¡®éƒ½å¯ä»¥äº§ç”Ÿæ­£ç¡®çš„åˆ†ç±»ç»“æœã€‚ç„¶è€Œï¼Œæœºå™¨å­¦ä¹ å»ºæ¨¡çš„ç›®çš„å¹¶ä¸æ˜¯å¯¹äºå·²çŸ¥ç‚¹ï¼ˆæ ‡ç­¾å·²çŸ¥ï¼‰æˆåŠŸåˆ†ç±»å³å¯ï¼Œå­¦ä¹ çš„ç›®çš„æ˜¯éœ€è¦å¯¹äºæœªçŸ¥æƒ…å†µä¹Ÿèƒ½å¤Ÿé€‚ç”¨ï¼Œå³å¯¹äºä¸€ä¸ªæœªçŸ¥åˆ†ç±»çš„æ•°æ®ç‚¹ï¼Œæˆ‘ä»¬çš„å»ºç«‹çš„æ¨¡å‹éœ€è¦å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ•°æ®ç‚¹å®ƒæ˜¯å±äºå“ªä¸€ç±»çš„ï¼Œæ­£ç±»æˆ–è€…æ˜¯è´Ÿç±»ã€‚æœºå™¨å­¦ä¹ å»ºç«‹çš„æ¨¡å‹è¯•å›¾å»å¯»æ‰¾æ•°æ®ä¸­ä¸€èˆ¬çš„è§„å¾‹ï¼Œè€Œä¸æ˜¯å¯¹äºå·²æœ‰æ•°æ®æ­£ç¡®çš„è¡¨ç¤ºã€‚\nå‡å¦‚å¯¹äºä¸€ä¸ªæ–°çš„æœªçŸ¥åˆ†ç±»çš„æ•°æ®ï¼Œå®ƒåœ¨äºŒç»´åæ ‡ä½ç½®ä¸ºXæ‰€åœ¨çš„ä½ç½®å¦‚ä¸‹å›¾ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸Šé¢å¾—åˆ°çš„è¿™äº›ç›´çº¿å¯¹æ–°çš„æ•°æ®Xåˆ†ç±»ï¼Œ$l_1$ç›´çº¿å’Œå…¶ä»–ç›´çº¿åˆ†ç±»çš„ç»“æœå¹¶ä¸ä¸€æ ·ï¼Œå®ƒå¤„åœ¨$l_1$å³ä¾§ï¼Œå°†å®ƒæ ‡è®°ä¸ºè´Ÿç±»ï¼›å®ƒå¤„åœ¨å…¶ä»–ç›´çº¿çš„å·¦ä¾§ï¼Œå°†å®ƒæ ‡è®°ä¸ºæ­£ç±»ã€‚ä¸åŒçš„çº¿æ€§æ¨¡å‹å¯¹äºæ–°çš„æ•°æ®çš„åˆ†ç±»ç»“æœä¸ä¸€æ ·ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•è¡¡é‡è¿™äº›ç›´çº¿çš„å¥½åï¼Œå“ªä¸€ä¸ªç›´çº¿æœ€å¥½ï¼Œæ›´èƒ½ä»£è¡¨è¿™äº›æ•°æ®ä¸­çš„ä¸€èˆ¬è§„å¾‹å‘¢ï¼Ÿ\nSVMç»™å‡ºçš„ç­”æ¡ˆæ˜¯ï¼šæ±‚è§£èƒ½å¤Ÿæ­£ç¡®åˆ’åˆ†è®­ç»ƒæ•°æ®é›†å¹¶ä¸”å‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢ã€‚ è¿™ä¹Ÿæ˜¯SVMå­¦ä¹ çš„åŸºæœ¬æƒ³æ³•ã€‚\nè¿™é‡Œçš„å‡ ä½•é—´éš”æœ€å¤§å«ä¹‰æ˜¯ï¼šåœ¨æ— æ•°æ­£ç¡®åˆ’åˆ†æ•°æ®é›†çš„åˆ†ç¦»è¶…å¹³é¢ä¸­ï¼Œæ‰¾åˆ°è¿™æ ·çš„è¶…å¹³é¢ï¼Œè¯¥è¶…å¹³é¢ç¦»æœ€è¿‘çš„æ•°æ®ç‚¹çš„è·ç¦»æœ€å¤§ã€‚ç”¨æ•°å­¦è¯­è¨€æè¿°ä¸ºä¸‹é¢çš„çº¦æŸæœ€ä¼˜åŒ–é—®é¢˜ï¼š $$ \\begin{array}{ll} \\max \\limits_{\\boldsymbol{w}, \\boldsymbol{b}} \u0026amp; \\gamma \\ \\text { s.t. } \u0026amp; y_{i}\\left(\\frac{\\boldsymbol{w}}{|\\boldsymbol{w}|} \\cdot \\boldsymbol{x_{i}}+\\frac{b}{|\\boldsymbol{w}|}\\right) \\geqslant \\gamma, \\quad i=1,2, \\cdots, N \\end{array} $$ å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œä»£è¡¨ä¼˜åŒ–é—®é¢˜ä¸­ç›®æ ‡å‡½æ•°ï¼Œç¬¬äºŒè¡Œä»£è¡¨çº¦æŸæ¡ä»¶ï¼Œ$s.t.$æŒ‡çš„æ˜¯subject to ï¼Œå—é™äºã€‚\nè¦ç†è§£ä¸Šé¢çš„å¼å­ï¼Œè®©æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹è¶…å¹³é¢çš„å…¬å¼ä»¥åŠç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»å…¬å¼ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« çš„æ¨å¯¼è¶…å¹³é¢å…¬å¼åŠç‚¹åˆ°è¶…å¹³é¢è·ç¦»ï¼Œè¶…å¹³é¢çš„å…¬å¼ä¸ºï¼š $$ \\boldsymbol{w}^{T} \\boldsymbol{x}+b=0 $$ å…¶ä¸­ï¼Œ$w$æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼Œæ­¤å¤„ä¸ºåˆ—å‘é‡ï¼Œç®€å•çš„ç†è§£ä¸ºï¼š$w^{T} x$ä¸ºæ³•å‘é‡å’Œè¶…å¹³é¢ä¸­çš„ç‚¹å‘é‡ï¼ˆåŸç‚¹åˆ°è¶…å¹³é¢ç‚¹å½¢æˆçš„å‘é‡ï¼‰çš„å†…ç§¯ï¼Œè¯¥å†…ç§¯ä»£è¡¨ç‚¹å‘é‡åœ¨æ³•å‘é‡ä¸ŠæŠ•å½±çš„è·ç¦»ï¼›å¦‚æœå¯¹è¶…ç©ºé—´ä¸­çš„è‡ªç”±ç‚¹æ–½åŠ ä¸€ä¸ªæ³•å‘é‡æŠ•å½±è·ç¦»ä¸º$-b$æ—¶çš„æ‹˜æŸæ¡ä»¶ï¼Œé‚£ä¹ˆæ‰€æœ‰æ»¡è¶³çº¦æŸæ¡ä»¶çš„æ‰€æœ‰ç‚¹å¤„äºè¶…å¹³é¢å†…ã€‚\nè¶…ç©ºé—´ä¸­ï¼Œç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»å…¬å¼ä¸ºï¼š $$ d=\\frac{|\\boldsymbol{w}^{T} \\boldsymbol{x}+b|}{|\\boldsymbol{w}|} $$ å…¶ä¸­$|\\boldsymbol{w}|$ä»£è¡¨$\\boldsymbol{w}$å‘é‡çš„ç¬¬äºŒèŒƒæ•°ï¼Œä¹Ÿç§°æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆè·ç¦»ï¼‰ï¼›å…¶ä¸¥æ ¼è¡¨ç¤ºåº”è¯¥ä¸º$|\\boldsymbol{w}|_2$ï¼Œå› ä¸ºæ¯”è¾ƒå¸¸ç”¨å¸¸å¸¸çœç•¥å³ä¸‹è§’æ ‡2ã€‚\nè®©æˆ‘ä»¬å›åˆ°ä¸Šé¢çš„SVMçº¦æŸæœ€ä¼˜åŒ–é—®é¢˜ï¼š $$ \\begin{array}{ll} \\max \\limits_{\\boldsymbol{w}, \\boldsymbol{b}} \u0026amp; \\gamma \u0026amp;\u0026amp; (1) \\ \\text { s.t. } \u0026amp; y_{i}\\left(\\frac{\\boldsymbol{w}}{|\\boldsymbol{w}|} \\cdot \\boldsymbol{x_{i}}+\\frac{b}{|\\boldsymbol{w}|}\\right) \\geqslant \\gamma, \\quad i=1,2, \\cdots, N \u0026amp;\u0026amp; (2) \\end{array} $$ $\\gamma$ä»£è¡¨çš„æ˜¯æ•°æ®ç‚¹åˆ°è¶…å¹³é¢çš„å‡ ä½•è·ç¦»ï¼Œ$(2)$å¼æ‹¬å·å†…ä»£è¡¨çš„æ˜¯æ¯ä¸ªç‚¹åˆ°è¶…å¹³é¢çš„å‡ ä½•è·ç¦»ï¼Œç„¶è€Œï¼Œä¸åŒäºä¸Šé¢çš„è·ç¦»å…¬å¼ï¼Œè¯¥å…¬å¼æ²¡æœ‰åŠ ç»å¯¹å€¼ï¼Œæ‹¬å·éƒ¨åˆ†çš„å€¼å¯æ­£å¯è´Ÿï¼Œæ˜¾ç„¶ï¼Œæ­£è´Ÿå¯¹åº”äºè¶…å¹³é¢çš„ä¸¤ä¾§ï¼Œä¸€å¼€å§‹æˆ‘ä»¬æœ‰çº¦å®šæ ‡ç­¾$y_i\\in{-1, +1}$ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬çº¦å®šæ‹¬å·éƒ¨åˆ†å€¼ä¸ºè´Ÿçš„é‚£ä¸€ä¾§ä»£è¡¨è´Ÿç±»ï¼Œå³$y_i=-1$ï¼›ä¸ºæ­£çš„é‚£ä¸€ä¾§ä»£è¡¨æ­£ç±»ï¼Œå³$y_i=+1$ï¼Œè¿™é‡Œæ›´å¤šçš„æ˜¯ä¸€ç§çº¦å®šçš„é—®é¢˜ï¼Œè¿™ç§çº¦å®šæ–¹ä¾¿æˆ‘ä»¬å»ºæ¨¡æ±‚è§£é—®é¢˜ã€‚\næˆ‘ä»¬å¯ä»¥è¯•ç€ç†è§£ä¸‹$(1) (2)$ä¸¤å¼ï¼Œå½“æœ‰æŸäº›æ•°æ®ç‚¹è¢«åˆ†é”™æ—¶ï¼Œ$(2)$å·¦ä¾§ç»“æœä¸ºè´Ÿå€¼ï¼Œé‚£ä¹ˆ$\\gamma$ä¹Ÿä¸ºè´Ÿå€¼ï¼Œæ­¤æ—¶$\\gamma$è‚¯å®šä¸æ˜¯æœ€å¤§å€¼ï¼Œåªæœ‰å½“æ‰€æœ‰çš„æ•°æ®ç‚¹éƒ½è¢«æ­£ç¡®åˆ†ç±»æ—¶ï¼ˆ$\\gamma$ä¸ºæ­£ï¼‰ï¼Œè€Œä¸”è¶…å¹³é¢è·ç¦»æœ€è¿‘çš„ç‚¹çš„è·ç¦»æœ€è¿œæ—¶ï¼Œ$\\gamma$è¾¾åˆ°æœ€å¤§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬çš„æ±‚è§£æ–¹æ³•æ˜¯å¯¹å‚æ•°é€æ­¥è¿­ä»£è¾¾åˆ°$\\gamma$æœ€å¤§æ—¶ï¼Œé‚£ä¹ˆä¸€å¼€å§‹æ˜¯ç”±è¯¯åˆ†ç±»ç‚¹é©±åŠ¨ï¼Œä¹‹åæ ¹æ®å‡ ä½•é—´éš”æœ€å¤§é©±åŠ¨å‚æ•°æ›´æ–°ã€‚ ä¸Šé¢æœ€ä¼˜åŒ–å»ºæ¨¡å®Œç¾å¾—åˆ°äº†æ­£ç¡®åˆ’åˆ†è®­ç»ƒæ•°æ®é›†å¹¶ä¸”å‡ ä½•é—´éš”æœ€å¤§çš„ç›®çš„ã€‚\nSVMçº¦æŸæœ€ä¼˜åŒ–é—®é¢˜ï¼š\n$$ \\begin{array}{ll} \\max \\limits_{w, b} \u0026amp; \\gamma \u0026amp; {(1)} \\\n\\text { s.t. } \u0026amp; y_{i}\\left(\\frac{w}{|w|} \\cdot x_{i}+\\frac{b}{|w|}\\right) \\geqslant \\gamma, \\quad i=1,2, \\cdots, N \u0026amp; {(2)} \\end{array} $$\nåç»­è®¨è®ºï¼š\næ•°æ®å¹¶ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚ æ•°æ®å­˜åœ¨è¯¯å·®ï¼Œè½¯é—´éš”ã€‚ SVMä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ æœ‰ä¸¥æ ¼çš„æ•°å­¦ç†è®ºæ”¯æŒï¼Œå¯è§£é‡Šæ€§å¼ºï¼Œä¸ä¾é ç»Ÿè®¡æ–¹æ³•ï¼Œä»è€Œç®€åŒ–äº†é€šå¸¸çš„åˆ†ç±»å’Œå›å½’é—®é¢˜ï¼› èƒ½æ‰¾å‡ºå¯¹ä»»åŠ¡è‡³å…³é‡è¦çš„å…³é”®æ ·æœ¬ï¼ˆå³ï¼šæ”¯æŒå‘é‡ï¼‰ï¼› é‡‡ç”¨æ ¸æŠ€å·§ä¹‹åï¼Œå¯ä»¥å¤„ç†éçº¿æ€§åˆ†ç±»/å›å½’ä»»åŠ¡ï¼› æœ€ç»ˆå†³ç­–å‡½æ•°åªç”±å°‘æ•°çš„æ”¯æŒå‘é‡æ‰€ç¡®å®šï¼Œè®¡ç®—çš„å¤æ‚æ€§å–å†³äºæ”¯æŒå‘é‡çš„æ•°ç›®ï¼Œè€Œä¸æ˜¯æ ·æœ¬ç©ºé—´çš„ç»´æ•°ï¼Œè¿™åœ¨æŸç§æ„ä¹‰ä¸Šé¿å…äº†â€œç»´æ•°ç¾éš¾â€ã€‚ ç¼ºç‚¹ è®­ç»ƒæ—¶é—´é•¿ã€‚å½“é‡‡ç”¨ SMO ç®—æ³•æ—¶ï¼Œç”±äºæ¯æ¬¡éƒ½éœ€è¦æŒ‘é€‰ä¸€å¯¹å‚æ•°ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º$O\\left(N^{2}\\right)$ï¼Œå…¶ä¸­ N ä¸ºè®­ç»ƒæ ·æœ¬çš„æ•°é‡ï¼› å½“é‡‡ç”¨æ ¸æŠ€å·§æ—¶ï¼Œå¦‚æœéœ€è¦å­˜å‚¨æ ¸çŸ©é˜µï¼Œåˆ™ç©ºé—´å¤æ‚åº¦ä¸º$O\\left(N^{2}\\right)$ï¼› æ¨¡å‹é¢„æµ‹æ—¶ï¼Œé¢„æµ‹æ—¶é—´ä¸æ”¯æŒå‘é‡çš„ä¸ªæ•°æˆæ­£æ¯”ã€‚å½“æ”¯æŒå‘é‡çš„æ•°é‡è¾ƒå¤§æ—¶ï¼Œé¢„æµ‹è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ã€‚ ç›®å‰åªé€‚åˆå°æ‰¹é‡æ ·æœ¬çš„ä»»åŠ¡ï¼Œæ— æ³•é€‚åº”ç™¾ä¸‡ç”šè‡³ä¸Šäº¿æ ·æœ¬çš„ä»»åŠ¡ã€‚ SVMä½¿ç”¨åœºæ™¯ ç°æœ‰çš„ä¸€äº›æ”¯æŒå‘é‡æœºè½¯ä»¶åŒ… LIBSVM \u0026ndash; A Library for Support Vector Machines\nä¸€äº›åºŸè¯ å‚è€ƒï¼š\nsupport-vector-machines\nç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ\n(https://zhuanlan.zhihu.com/p/77750026)\n","date":"2020-07-14T17:46:32Z","permalink":"https://qiyueliuhuo.github.io/posts/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/","title":"æœºå™¨å­¦ä¹ ä¹‹æ”¯æŒå‘é‡æœº"},{"content":"å‰è¨€ äººå·¥ç¥ç»ç½‘ç»œï¼ˆArtificial Neural Networkï¼ŒANNï¼‰æ˜¯ä¸€é—¨é‡è¦çš„æœºå™¨å­¦ä¹ æŠ€æœ¯ã€‚å®ƒæ˜¯ç›®å‰æœ€ä¸ºç«çƒ­çš„ç ”ç©¶æ–¹å‘\u0026ndash;æ·±åº¦å­¦ä¹ ï¼ˆDeep Learningï¼‰çš„åŸºç¡€ã€‚å­¦ä¹ ç¥ç»ç½‘ç»œä¸ä»…å¯ä»¥è®©ä½ æŒæ¡ä¸€é—¨å¼ºå¤§çš„æœºå™¨å­¦ä¹ æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ›´å¥½åœ°å¸®åŠ©ä½ ç†è§£æ·±åº¦å­¦ä¹ æŠ€æœ¯ã€‚\nå››å¹´å‰ï¼ŒéŸ©å›½å›´æ£‹ä¹æ®µæ£‹æ‰‹æä¸–çŸ³ä¸è°·æ­Œäººå·¥æ™ºèƒ½ AlphaGo ä¹‹é—´çš„å›´æ£‹æ¯”èµ›ï¼Œæœ€ç»ˆ AlphaGo ä»¥å››æ¯”ä¸€å–èƒœï¼Œè¿™è®©äººå·¥æ™ºèƒ½ AlphaGo èƒŒåçš„æŠ€æœ¯â€”â€”æ·±åº¦å­¦ä¹ ç®—æ³•å¤§ç«ï¼Œç¬”è€…ä¹Ÿæ˜¯ä»è¿™ä¸ªæ—¶å€™å¼€å§‹å…³æ³¨æ·±åº¦å­¦ä¹ ï¼Œå¯¹è®¡ç®—æœºé¢†åŸŸäº§ç”Ÿäº†å…´è¶£ã€‚æ­¤åä¸€å¹´ï¼Œè°·æ­Œåˆæ¨å‡º AlphaGo å›´æ£‹å‡çº§ç‰ˆï¼Œå¹¶é‚€è¯·ä¸–ç•Œå›´æ£‹å† å†›ã€ä¸­å›½æ£‹æ‰‹æŸ¯æ´äº 2017 å¹´ 5 æœˆä»½ä¸ä¹‹è¿›è¡Œå›´æ£‹å¤§æˆ˜ï¼Œç¬”è€…å…¨ç¨‹ç›´æ’­è§‚çœ‹äº† AlphaGo ä¸æŸ¯æ´äººæœºå›´æ£‹å¤§æˆ˜ï¼Œåœ¨çœ‹åˆ°ä½œä¸ºäººç±»æ™ºæ…§çš„é¡¶å³°æŸ¯æ´å«æ³ªè®¤è¾“åï¼Œç¬”è€…è¢« AlphaGo èƒŒåçš„æŠ€æœ¯ç¥ç»ç½‘ç»œæ‰€æ·±æ·±éœ‡æ’¼ï¼ˆè¿˜åŒ…æ‹¬å¦ä¸€ç§æŠ€æœ¯ï¼šè’™ç‰¹å¡æ´›æ ‘æœç´¢ï¼‰ã€‚å›´æ£‹ä¸åŒäºå…¶ä»–æ£‹ï¼Œè®¡ç®—æœºç›®å‰æ— æ³•éå†å›´æ£‹çš„æ‰€æœ‰å¯èƒ½çš„ä¸‹æ³•ï¼Œæ‰€ä»¥ç®—æ³•å¿…é¡»å°è¯•æ¨¡æ‹Ÿäººç±»å¤§è„‘çš„ä¸‹æ£‹ï¼Œæ ¹æ®ä»¥å¾€å­¦ä¹ åˆ°çš„ç»éªŒåˆ¤æ–­è½æ£‹ç‚¹ï¼Œè€Œä¸æ˜¯æš´åŠ›éå†æ‰€æœ‰å¯èƒ½æ€§åé€‰æ‹©æœ€ä½³çš„ä¸‹æ£‹ç‚¹ï¼Œä»è€Œå–èƒœã€‚\nè¿™ç¯‡æ–‡ç« è¯•å›¾ä»‹ç»æ·±åº¦å­¦ä¹ ä¸­å¾ˆé‡è¦çš„æŠ€æœ¯â€”â€”ç¥ç»ç½‘ç»œï¼Œå¹¶é‡ç‚¹ä»‹ç»ç¥ç»ç½‘ç»œä¸­è¿ç”¨åˆ°åå‘ä¼ æ’­ç®—æ³•ã€‚\nåœ¨ç¬”è€…å¤§å­¦æœŸé—´ï¼Œé™¤äº†ä¸¤åœºå›´æ£‹äººæœºå¤§æˆ˜å¤–ï¼Œè¿˜æœ‰ä¸€åœºæ¯”è¾ƒæœ‰æ„æ€çš„å¤§å‹å®éªŒï¼šå¤§è´å°”å®éªŒâ€”â€”å…³äºéªŒè¯åŸºç¡€ç‰©ç†é‡å­åŠ›å­¦ä¸­éå¸¸æœ‰åä¸”é‡è¦çš„è´å°”ä¸ç­‰å¼çš„å®éªŒã€‚æ‰€è°“â€œé‡äº‹ä¸å†³ï¼Œé‡å­åŠ›å­¦â€ï¼Œè¿™ä¸ªæ¢—å°±è¡¨ç¤ºäº†é‡å­åŠ›å­¦ä¸­å­˜åœ¨ä¸€äº›æ— æ³•è§£é‡Šï¼ˆå®è§‚ä¸–ç•Œéš¾ä»¥ç†è§£ï¼‰çš„ç°è±¡ï¼Œè‹¥æœ‰å…´è¶£å¯ä»¥å†äº†è§£ä¸‹ã€‚\næ„ŸçŸ¥æœº æ„ŸçŸ¥æœºä»‹ç» é¦–å…ˆè®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ç¥ç»ç½‘ç»œä¸­æœ€ç®€å•ä¹Ÿæ˜¯æœ€åŸºç¡€çš„ä¸€ç§ç»“æ„â€”â€”æ„ŸçŸ¥æœºï¼ˆPerceptronï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š ç ”ç©¶è€…æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»ç½‘ç»œä¸­çš„ä¸€ä¸ªç®€å•çš„ç¥ç»å…ƒçš„è¡Œä¸ºâ€”â€”ç¥ç»å…ƒå…´å¥‹è¿‡ç¨‹ï¼Œä¸ä¹‹å¯¹åº”çš„æ„ŸçŸ¥æœºåŸºç¡€æ¦‚å¿µè¢«æå‡ºï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠæƒé‡å½“ä½œçªè§¦ã€æŠŠåç½®å½“ä½œé˜ˆå€¼ä»¥åŠæŠŠæ¿€æ´»å‡½æ•°å½“ä½œç»†èƒä½“ï¼Œå½“ç»è¿‡çªè§¦çš„ä¿¡å·æ€»å’Œè¶…è¿‡äº†æŸä¸ªé˜ˆå€¼ï¼ˆåç½®é¡¹ï¼‰ï¼Œç»†èƒä½“å°±ä¼šå…´å¥‹ï¼ˆæ¿€æ´»å‡½æ•°ï¼‰ï¼Œäº§ç”Ÿç”µè„‰å†²ï¼ˆè¾“å‡º 1ï¼‰ï¼Œè€Œå½“ä¿¡å·é‡æ€»å’Œæœªè¶…è¿‡é˜ˆå€¼ï¼Œä¸äº§ç”Ÿç”µè„‰å†²ï¼ˆè¾“å‡º 0ï¼‰ã€‚å®ƒå¯ä»¥è¢«è§†ä¸ºä¸€ç§æœ€ç®€å•å½¢å¼çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œæ˜¯ä¸€ç§äºŒå…ƒçº¿æ€§åˆ†ç±»å™¨ã€‚æ„ŸçŸ¥æœºï¼ˆå•ä¸ªç¥ç»å…ƒï¼‰ä»£è¡¨äº†ä»è¾“å…¥ç©ºé—´åˆ°è¾“å‡ºç©ºé—´çš„å¦‚ä¸‹å‡½æ•°ï¼š $$ y = f(\\sum_{i=1}^{n}w_ix_i + b) $$ ç†æƒ³ä¸­çš„æ¿€æ´»å‡½æ•° $f(Â·)$ æ˜¯ä¸‹å›¾ a æ‰€ç¤ºçš„é˜¶è·ƒå‡½æ•°ï¼Œè¾“å‡ºâ€œ1â€å¯¹åº”ç¥ç»å…ƒå…´å¥‹ï¼Œè¾“å‡ºâ€œ0â€å¯¹åº”ç¥ç»å…ƒæŠ‘åˆ¶ï¼Œç„¶è€Œé˜¶è·ƒå‡½æ•°å…·æœ‰ä¸è¿ç»­ã€ä¸å…‰æ»‘ç­‰ä¸å¤ªå¥½çš„æ•°å­¦æ€§è´¨ï¼Œå› æ­¤å®é™…å¸¸ç”¨ Sigmoid å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå¦‚ä¸‹å›¾ b æ‰€ç¤ºï¼Œè¯¥å‡½æ•°å°†å®åŸŸèŒƒå›´çš„è¾“å‡ºæŒ¤å‹åˆ°ï¼ˆ0ï¼Œ1ï¼‰èŒƒå›´è¾“å‡ºï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œæŒ¤å‹å‡½æ•°â€ã€‚ å¯¹äºæ„ŸçŸ¥æœºæ¨¡å‹çš„ç†è§£ï¼šæ„ŸçŸ¥æœºæ¨¡å‹çš„å‡è®¾ç©ºé—´ï¼ˆå®¹é‡ï¼‰æ˜¯å®šä¹‰åœ¨ç‰¹å¾ç©ºé—´ä¸­çš„æ‰€æœ‰çº¿æ€§åˆ†ç±»æ¨¡å‹æˆ–çº¿æ€§åˆ†ç±»å™¨ã€‚æ„ŸçŸ¥æœºå¯¹åº”å‡½æ•°å€¼ä¸º 0ï¼Œå³$wÂ·x + b = 0$ï¼Œå¯¹åº”äºç‰¹å¾ç©ºé—´$R^n$ä¸­çš„ä¸€ä¸ªè¶…å¹³é¢$S$ï¼Œå…¶ä¸­$w$æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼Œ$b$æ˜¯è¶…å¹³é¢çš„æˆªè·ï¼Œè¿™ä¸ªè¶…å¹³é¢å°†ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä½äºä¸¤éƒ¨åˆ†ç©ºé—´ä¸­çš„ç‚¹åˆ†åˆ«è¢«åˆ†ä¸ºæ­£ã€è´Ÿä¸¤ç±»ã€‚\næ„ŸçŸ¥æœºå­¦ä¹ ç­–ç•¥ æ„ŸçŸ¥æœºå­¦ä¹ ä»¥æœ€å°åŒ–è¯¯åˆ†ç±»ç‚¹åˆ°è¶…å¹³é¢$S$çš„æ€»è·ç¦»ä¸ºç›®æ ‡ï¼Œå› æ­¤æ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•æ˜¯è¯¯åˆ†ç±»é©±åŠ¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ—¶é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ã€‚ è¯¯åˆ†ç±»ç‚¹åˆ°è¶…å¹³é¢çš„æ€»è·ç¦»ä¸º $$ -\\frac{1}{||w||}\\sum_{x_i\\in M}y_i(wÂ·x_i + b) $$ å…¶ä¸­$(x_i, y_i)$ä¸ºæ ·æœ¬ç‚¹ï¼Œ$M$ä¸ºè¯¯åˆ†ç±»ç‚¹çš„é›†åˆï¼Œå¯¹äºè¯¯åˆ†ç±»ç‚¹æ¥è¯´$-y_i(wÂ·x_i + b) \u0026gt; 0$æˆç«‹ï¼Œä¸”å½“$(wÂ·x_i + b) \u0026gt; 0$æ—¶ï¼Œ$y_i = -1$ï¼Œå½“$(wÂ·x_i + b) \u0026lt; 0$æ—¶ï¼Œ$y_i = +1$ã€‚ ä¸è€ƒè™‘$\\frac{1}{||w||}$ï¼Œå°±å¾—åˆ°æ„ŸçŸ¥æœºå­¦ä¹ çš„æŸå¤±å‡½æ•°ä¸º $$ L(w, b) = -\\sum_{x_i\\in M}y_i(wÂ·x_i + b) $$ æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¸º $$ \\nabla_w L(w, b) = - \\sum_{x_i\\in M}y_ix_i$$ $$ \\nabla_b L(w, b) = - \\sum_{x_i\\in M}y_i$$\né‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼Œéšæœºé€‰å–ä¸€ä¸ªè¯¯åˆ†ç±»ç‚¹$(x_i, y_i)$ï¼Œå¯¹$w, b$è¿›æ€§æ›´æ–°ï¼š $$ w \\leftarrow w + \\eta y_ix_i $$ $$ b \\leftarrow b + \\eta y_i $$\nå…·ä½“æ¨å¯¼è¿‡ç¨‹åŠç®—æ³•è¿­ä»£è¿‡ç¨‹å‚è§æèˆªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ï¼Œä»£ç å®ç°å‚è§æ­¤ githubã€‚\næ„ŸçŸ¥æœºæ¨¡å‹å­˜åœ¨çš„é—®é¢˜ æ„ŸçŸ¥æœºçš„å­¦ä¹ èƒ½åŠ›éå¸¸æœ‰é™ï¼Œä¸ã€æˆ–ã€éé—®é¢˜éƒ½æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œæ‰€ä»¥æ„ŸçŸ¥æœºå¯ä»¥å¤„ç†ï¼Œä½†æ˜¯æ„ŸçŸ¥æœºå´ä¸èƒ½è§£å†³å¼‚æˆ–ç®€å•çš„éçº¿æ€§å¯åˆ†é—®é¢˜ã€‚ å¼‚æˆ–é—®é¢˜æš´éœ²å‡ºè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå³åœ¨ç°å®ä»»åŠ¡ä¸­ï¼ŒåŸå§‹æ ·æœ¬ç©ºé—´å†…ä¹Ÿè®¸å¹¶ä¸å­˜åœ¨ä¸€ä¸ªèƒ½æ­£ç¡®åˆ’åˆ†ä¸¤ç±»æ ·æœ¬çš„è¶…å¹³é¢ï¼Œå¯¹äºè¿™æ ·çš„é—®é¢˜ï¼Œä¸€ç§æ–¹æ³•ï¼Œ1) å¯å°†æ ·æœ¬ä»åŸå§‹ç©ºé—´æ˜ å°„åˆ°ä¸€ä¸ªæ›´é«˜ç»´çš„ç‰¹å¾ç©ºé—´ï¼ˆæˆ–è€…ä¸ç”¨æ›´é«˜ç»´ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ‰€è°“çš„æ ¸å‡½æ•°$\\phi$ï¼Œä½¿å¾—æ ·æœ¬åœ¨è¿™ä¸ªç‰¹å¾ç©ºé—´å†…çº¿æ€§å¯åˆ†ï¼Œå¹¸è¿çš„æ˜¯ï¼Œå¦‚æœåŸå§‹ç©ºé—´æ˜¯æœ‰é™ç»´ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ä¸€ä¸ªé«˜ç»´ç‰¹å¾ç©ºé—´ä½¿å¾—æ ·æœ¬çº¿æ€§å¯åˆ†ã€‚2) å¦ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ æ„ŸçŸ¥æœºçš„å±‚æ•°ï¼Œä½¿å¾—å½¢æˆä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œå…¶ä¸­è¾“å…¥å±‚ç¥ç»å…ƒæ¥å—å¤–ç•Œè¾“å…¥ï¼Œéšå±‚ä¸è¾“å‡ºå±‚ç¥ç»å…ƒå¯¹ä¿¡å·è¿›è¡ŒåŠ å·¥ï¼Œæœ€ç»ˆç»“æœç”±è¾“å‡ºå±‚ç¥ç»å…ƒè¾“å‡ºã€‚ï¼ˆèŠ±ä¹¦ç†è§£ï¼šæ·±å±‚ç¥ç»ç½‘ç»œä¸­çš„éšè—å±‚å³ä»£è¡¨è¾“å…¥ç»è¿‡äº†ä¸€ä¸ªæ ¸å‡½æ•°$\\phi$å˜æ¢ï¼Œé‚£ä¹ˆä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½æ˜¯åœ¨å¯»æ‰¾ä¸€ä¸ªæ°å½“çš„æ ¸å‡½æ•°$\\phi$ï¼Œç¥ç»ç½‘ç»œçš„æ–¹å¼æ˜¯é€šè¿‡ç½‘ç»œè‡ªä¸»å­¦ä¹ å­¦åˆ°æ°å½“çš„æ ¸å‡½æ•°ï¼‰\nç¥ç»ç½‘ç»œ ç¥ç»ç½‘ç»œä»‹ç» è€ƒè™‘åˆ°æ„ŸçŸ¥æœºæ¨¡å‹å­˜åœ¨çš„é—®é¢˜ï¼Œå³åªèƒ½è§£å†³çº¿æ€§å¯åˆ†é—®é¢˜ï¼Œæˆ‘ä»¬å°†æ„ŸçŸ¥æœºè¿›è¡Œè¿æ¥ï¼Œå½¢æˆå¤šå±‚æ„ŸçŸ¥æœºâ€”â€”ç¥ç»ç½‘ç»œï¼Œå¦‚ä¸‹å›¾\nç¥ç»ç½‘ç»œå…¶å®å°±æ˜¯æŒ‰ç…§ä¸€å®šè§„åˆ™è¿æ¥èµ·æ¥çš„å¤šä¸ªç¥ç»å…ƒã€‚ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªå…¨è¿æ¥(full connected, FC)ç¥ç»ç½‘ç»œï¼Œé€šè¿‡è§‚å¯Ÿä¸Šé¢çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å®ƒçš„è§„åˆ™åŒ…æ‹¬ï¼š\nç¥ç»å…ƒæŒ‰ç…§å±‚æ¥å¸ƒå±€ã€‚æœ€å·¦è¾¹çš„å±‚å«åšè¾“å…¥å±‚ï¼Œè´Ÿè´£æ¥æ”¶è¾“å…¥æ•°æ®ï¼›æœ€å³è¾¹çš„å±‚å«è¾“å‡ºå±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™å±‚è·å–ç¥ç»ç½‘ç»œè¾“å‡ºæ•°æ®ã€‚è¾“å…¥å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´çš„å±‚å«åšéšè—å±‚ï¼Œå› ä¸ºå®ƒä»¬å¯¹äºå¤–éƒ¨æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚ åŒä¸€å±‚çš„ç¥ç»å…ƒä¹‹é—´æ²¡æœ‰è¿æ¥ã€‚ ç¬¬Nå±‚çš„æ¯ä¸ªç¥ç»å…ƒå’Œç¬¬N-1å±‚çš„æ‰€æœ‰ç¥ç»å…ƒç›¸è¿(è¿™å°±æ˜¯full connectedçš„å«ä¹‰)ï¼Œç¬¬N-1å±‚ç¥ç»å…ƒçš„è¾“å‡ºå°±æ˜¯ç¬¬Nå±‚ç¥ç»å…ƒçš„è¾“å…¥ã€‚ æ¯ä¸ªè¿æ¥éƒ½æœ‰ä¸€ä¸ªæƒå€¼ã€‚ ä¸Šé¢è¿™äº›è§„åˆ™å®šä¹‰äº†å…¨è¿æ¥ç¥ç»ç½‘ç»œçš„ç»“æ„ã€‚äº‹å®ä¸Šè¿˜å­˜åœ¨å¾ˆå¤šå…¶å®ƒç»“æ„çš„ç¥ç»ç½‘ç»œï¼Œæ¯”å¦‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ã€å¾ªç¯ç¥ç»ç½‘ç»œ(RNN)ï¼Œä»–ä»¬éƒ½å…·æœ‰ä¸åŒçš„è¿æ¥è§„åˆ™ã€‚\nç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºç¥ç»ç½‘ç»œè¿ç®—è¿‡ç¨‹ï¼Œå¦‚ä¸‹ï¼š ç¬¬ä¸€å±‚åŠ æƒå’Œä¸º $$ A^{(1)} = XW^{(1)} + B^{(1)} $$ å…¶ä¸­ï¼Œ$X$ä¸º$N\\times2$å¤§å°çŸ©é˜µï¼Œ$N$ä»£è¡¨è¾“å…¥ç¥ç»ç½‘ç»œçš„æ•°æ®æœ‰$N$ä¸ªæ ·æœ¬ï¼Œ$2$ä»£è¡¨æ¯ä¸ªæ ·æœ¬æœ‰ä¸¤ä¸ªç‰¹å¾å€¼ï¼›$W$ä¸º$2\\times3$å¤§å°çš„çŸ©é˜µä»£è¡¨è¾“å…¥å±‚åˆ°ä¸­é—´å±‚çš„çº¿æ€§å˜æ¢æƒé‡çŸ©é˜µï¼›$B$ä¸ºåç½®é¡¹ã€‚ ç¬¬ä¸€å±‚æ¿€æ´»åä¸º $$ Z^{(1)} = sigmoid(A^{(1)}) $$ å…¶ä¸­ sigmoid å‡½æ•°ä½œç”¨äº$A^{(1)}$ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚å°†ç¬¬ä¸€å±‚çš„è¾“å‡º$Z^{(1)}$ä½œä¸ºç¬¬äºŒå±‚çš„è¾“å…¥ï¼ŒåŒç†å¾—ï¼š $$ A^{(2)} = Z^{(1)}W^{(2)} + B^{(2)} $$ æ³¨æ„ï¼š å› ä¸ºå•éšå±‚ç¥ç»ç½‘ç»œåªç»è¿‡ä¸¤å±‚ä¼ æ’­ï¼Œé‚£ä¹ˆç¬¬äºŒå±‚çš„è¾“å‡ºå°±æ˜¯ç½‘ç»œçš„è¾“å‡ºï¼Œè¿™é‡Œä¸€èˆ¬ï¼ˆ1ï¼‰å›å½’é—®é¢˜ä½¿ç”¨æ’ç­‰å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œï¼ˆ2ï¼‰åˆ†ç±»é—®é¢˜å¯ä»¥ä½¿ç”¨ softmax å‡½æ•°ã€‚æˆ‘ä»¬æŠŠæ­¤ç¥ç»ç½‘ç»œçœ‹ä½œæ˜¯åˆ†ç±»é‡‡ç”¨ softmax å‡½æ•°ï¼š $$ y_k = \\frac{exp(a_k)}{\\sum_{i=1}^{n}exp(a_i)} $$ é‚£ä¹ˆç¥ç»ç½‘ç»œçš„è¾“å‡ºä¸º $$ Y = softmax(A^{(2)}) $$ å…¶ä¸­$Y$ä¸º$N\\times2$çŸ©é˜µï¼Œå½¢å¦‚ï¼š\n$$ \\left[ \\begin{array}{ccc} 0.2650877\u0026amp; 0.7349123\\\\ \\vdots \u0026amp; \\vdots\\\\ 0.8987211 \u0026amp; 0.1012788\\\\ \\end{array} \\right] $$\nä»£è¡¨ç¬¬ä¸€ä¸ªæ ·æœ¬é¢„æµ‹ä¸ºç¬¬äºŒä¸ªåˆ†ç±»æ¦‚ç‡ä¸º 0.7349123ï¼Œå¤§äº 0.5ï¼Œå¯ä»¥è®¤ä¸ºé¢„æµ‹ä¸ºç¬¬äºŒä¸ªåˆ†ç±»ï¼›æœ€åä¸€ä¸ªæ ·æœ¬é¢„æµ‹ä¸ºç¬¬ä¸€ä¸ªåˆ†ç±»æ¦‚ç‡ä¸º 0.8987211ï¼Œå¯ä»¥è®¤ä¸ºé¢„æµ‹ä¸ºç¬¬ä¸€ä¸ªåˆ†ç±»ã€‚ï¼ˆå½“ç„¶åªæœ‰ä¸¤ä¸ªæ ·æœ¬çš„æƒ…å†µä¸‹ä¸€èˆ¬çœ‹ä½œæ­£ç±»å’Œè´Ÿç±»ï¼Œåªéœ€è¦ä¸€ä¸ªè¾“å‡ºç¥ç»å…ƒï¼Œä½¿ç”¨ sigmoid å‡½æ•°æ¿€æ´»å³å¯ã€‚ï¼‰è¯¥æ¨¡å‹ä½¿ç”¨ softmax å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥æ¨å¹¿åˆ°å¤šåˆ†ç±»æƒ…å†µä¸‹ã€‚\nç¥ç»ç½‘ç»œå­¦ä¹ ç­–ç•¥ ç¥ç»ç½‘ç»œçš„å­¦ä¹ ä¸­ä½¿ç”¨çš„æŒ‡æ ‡ä¸ºæŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ï¼Œå³ä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°ä¸ºç›®æ ‡ï¼Œç†è®ºä¸Šï¼ŒæŸå¤±å‡½æ•°å¯ä»¥ä½¿ç”¨ä»»æ„å‡½æ•°ï¼Œä½†å®é™…ä¸­ä¸€èˆ¬ç”¨å‡æ–¹è¯¯å·®å’Œäº¤å‰ç†µè¯¯å·®ç­‰ã€‚ å‡æ–¹è¯¯å·®ä¸º $$ E = \\frac{1}{2}\\sum_{k}(y_k - t_k)^2 $$ äº¤å‰ç†µè¯¯å·®ä¸º $$ E = -\\sum_{k}t_k\\log_ey_k $$ å…¶ä¸­$y_k$è¡¨ç¤ºç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼Œ$t_k$è¡¨ç¤ºç›‘ç£æ•°æ®ï¼Œk è¡¨ç¤ºæ•°æ®çš„ç»´åº¦ï¼Œå¦‚åœ¨æ‰‹å†™æ•°å­—è¯†åˆ«ä¾‹å­ä¸­ï¼Œ$y_k$ã€$t_k$å¦‚ä¸‹ 10 ä¸ªå…ƒç´ æ„æˆçš„æ•°æ®ï¼š\n1 2 y = [0.1, 0.05, 0.6, 0.0, 0.05, 0.1, 0.0, 0.1, 0.0, 0.0] t = [0, 0, 1, 0, 0, 0, 0, 0, 0, 0] åœ¨æ‰¹é‡æ ·æœ¬å­¦ä¹ ä¸­ï¼Œå¯ä»¥å°†å¯¹æ‰€æœ‰çš„æ ·æœ¬çš„å•ä¸ªè¯¯å·®æ±‚å’Œï¼Œç„¶åå†é™¤ä»¥æ ·æœ¬æ•° Nï¼Œæ±‚å¾—å•ä¸ªæ•°æ®çš„â€œå¹³å‡æŸå¤±å‡½æ•°â€ï¼Œå°†å®ƒä½œä¸ºæŸå¤±å‡½æ•°ã€‚ ç¥ç»ç½‘ç»œå­¦ä¹ çš„ç­–ç•¥å’Œæ„ŸçŸ¥æœºå­¦ä¹ ç­–ç•¥éƒ½æ˜¯ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ï¼Œç¥ç»ç½‘ç»œå­¦ä¹ ä¸­ä¹Ÿæ˜¯é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼Œä¸æ„ŸçŸ¥æœºå­¦ä¹ ç­–ç•¥æ›´æ–°å‚æ•°ç±»ä¼¼ï¼Œå¯¹äºç¥ç»ç½‘ç»œä»»æ„å‚æ•°ï¼ˆçº¿æ€§æƒé‡ã€çº¿æ€§åç½®ç­‰éœ€è¦å­¦ä¹ å‚æ•°ï¼‰æ›´æ–°ä¼°è®¡å¼å¦‚ä¸‹ $$ v \\leftarrow v + \\Delta v $$ æ›´æ–°å‚æ•°ä¸ºçº¿æ€§è¿æ¥æƒé‡å‚æ•°æ—¶ $$ w_{hj} \\leftarrow w_{hj} + \\Delta w_{hj} $$ é‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œæœ‰ $$ w_{hj} \\leftarrow w_{hj} - \\eta \\frac{\\partial E}{\\partial w_{hj}} $$ å¯¹äºæ¢¯åº¦æ±‚è§£ï¼Œä¸€èˆ¬æœ‰è§£ææ³•å’Œæ•°å€¼æ³•ä¸¤ç§æ–¹æ³•ï¼Œéšç€ç¥ç»ç½‘ç»œç¥ç»å…ƒå¢åŠ å’Œå±‚æ•°å¢åŠ ï¼Œç›´æ¥æ±‚ä¸Šä¸‡ï¼Œç”šè‡³ä¸Šäº¿ä¸ªå‚æ•°çš„è§£æå¯¼æ•°å˜å¾—ä¸ç°å®ï¼Œè®¡ç®—é‡éå¸¸å¤§ã€‚ä¸‹é¢å°†ä»‹ç»ä¸¤ç§æ•°å€¼æ–¹å¼è®¡ç®—æ¢¯åº¦æ–¹æ³•ï¼šå¯¼æ•°å®šä¹‰æ³•å’Œåå‘ä¼ æ’­æ³•ã€‚\næ¢¯åº¦è®¡ç®— æ¢¯åº¦åœ¨ç›´è§’åæ ‡ç³»ä¸‹è®¡ç®—å…¬å¼ä¸º $$ \\nabla f(x) = (\\frac{\\partial f(x)}{\\partial x_1}, \\frac{\\partial f(x)}{\\partial x_2}, \u0026hellip;) $$ æ¢¯åº¦è®¡ç®—çš„ç»“æœæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°è®¡ç®—æ¢¯åº¦éœ€è¦æ±‚å‡½æ•°å¯¹äºå„ä¸ªè‡ªå˜é‡çš„åå¯¼æ•°ã€‚ å¯¹äºå¤šå…ƒå‡½æ•°ï¼Œåå¯¼è¡¨ç¤ºè‡ªå˜é‡æŸä¸ªç¬é—´çš„å˜åŒ–é‡ã€‚å®šä¹‰ä¸ºå¦‚ä¸‹ï¼š $$ \\frac{\\partial f(x_1, x_2, x_3\u0026hellip;x_i\u0026hellip;)}{\\partial x_i} = \\lim_{h \\to 0} \\frac{f(x_1, x_2, x_3\u0026hellip;x_i + h, \u0026hellip;)}{h} $$ åå¯¼çš„å®šä¹‰å’Œå¯¼æ•°çš„å®šä¹‰ç±»ä¼¼ï¼Œè¡¨ç¤ºè‡ªå˜é‡ä¸Šâ€œå¾®å°çš„å˜åŒ–â€å°†å¯¼è‡´å‡½æ•°$f(x)$çš„å€¼åœ¨å¤šå¤§ç¨‹åº¦ä¸Šå‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ç¨‹åºå®ç°ä¸Šé¢çš„è®¡ç®—æ–¹å¼ï¼Œç¨‹åºä¸­æ— æ³•è¡¨ç¤º h è¶‹è¿‘ 0ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¾®å°å€¼ä»£æ›¿ï¼Œè®¡ç®—è¿‘ä¼¼è§£ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # æ•°å€¼æ¢¯åº¦ def numerical_gradient(f, x): h = 1e-4 # 0.0001 grad = np.zeros_like(x) # ç”Ÿæˆå’Œxå½¢çŠ¶ç›¸åŒçš„æ•°ç»„ for idx in range(x.size): tmp_val = x[idx] # è®¡ç®—f(x+h) x[idx] = tmp_val + h fxh1 = f(x) # è®¡ç®—f(x-h) x[idx] = tmp_val - h fxh2 = f(x) grad[idx] = (fxh1 - fxh2) / (2*h) x[idx] = tmp_val # è¿˜åŸxçš„å€¼ return grad ä¸Šé¢ç¨‹åºå®ç°çš„åå¯¼æ•°æ–¹å¼å’Œä¸Šé¢å…¬å¼ç¨æœ‰ä¸åŒï¼Œä½¿ç”¨ä¸­å¿ƒå·®åˆ†ï¼Œè¯¯å·®æ¯”å‰å‘å·®åˆ†å°ï¼Œå­¦è¿‡å¾®ç§¯åˆ†çš„åŒå­¦åº”è¯¥èƒ½å¤Ÿæ˜ç™½ã€‚**è™½ç„¶ä¸Šé¢æ±‚åå¯¼æ•°çœ‹ç€å¾ˆæ–¹ä¾¿å¾ˆç®€å•ï¼Œä½†æ˜¯æ ¹æ®ä¸Šé¢çš„æ–¹å¼è®¡ç®—æ¢¯åº¦åœ¨é¢å¯¹ç¥ç»ç½‘ç»œè¿™ç§å…·æœ‰å¾ˆå¤§è§„æ¨¡è¾“å…¥å’Œå¾ˆå¤§è§„æ¨¡å‚æ•°æ—¶ï¼Œè®¡ç®—æ•ˆç‡ç›¸å½“æ…¢ã€‚**ä¸‹é¢å°†é‡ç‚¹ä»‹ç»åå‘ä¼ æ’­ç®—æ³•è®¡ç®—æ¢¯åº¦ã€‚ï¼ˆä»‹ç»å®Œåå‘ä¼ æ’­ç®—æ³•åï¼Œè¿˜ä¼šå†ä»‹ç»ä¸¤è€…æ±‚è§£æ–¹å¼å·®å¼‚ï¼Œä¸ºä»€ä¹ˆä¸Šé¢æ–¹å¼æ±‚è§£æ¢¯åº¦é€Ÿåº¦åœ¨ç¥ç»ç½‘ç»œåº”ç”¨ä¸Šæ•ˆç‡å¤ªæ…¢ï¼‰\nè®¡ç®—å›¾ ä¸ºäº†æ›´ç²¾ç¡®åœ°æè¿°åå‘ä¼ æ’­ç®—æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨è®¡ç®—å›¾ï¼ˆcomputational graphï¼‰è¯­è¨€æ¥æè¿°ä¸€ç³»åˆ—æ“ä½œã€‚ã€Šæ·±åº¦å­¦ä¹ ã€‹èŠ±ä¹¦å’Œæ–¯å¦ç¦æé£é£ cs231n è¯¾ç¨‹å¯¹äºè®¡ç®—å›¾è¡¨ç¤ºä¸Šæœ‰äº›åŒºåˆ«ï¼Œä½†éƒ½è¡¨ç¤ºåŒä¸€ä¸ªå«ä¹‰ï¼Œå³ç”¨å›¾çš„æ–¹å¼å½¢å¼åŒ–åœ°å°†æ“ä½œæ¬¡åºè¡¨ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿ç†è§£ã€‚è¿™é‡Œæˆ‘ä»¬ä»‹ç» cs231n è¯¾ç¨‹å¯¹äºè®¡ç®—å›¾çš„ç”»æ³•ã€‚ ä½¿ç”¨åœ†åœˆä»£è¡¨æ“ä½œèŠ‚ç‚¹ï¼ŒæŒ‡å‘èŠ‚ç‚¹çš„ç®­å¤´ä»£è¡¨è¾“å…¥å˜é‡ï¼Œä»èŠ‚ç‚¹æŒ‡å‡ºçš„ç®­å¤´ä»£è¡¨æ“ä½œå®Œåè¾“å‡ºçš„å˜é‡ã€‚ä¸Šé¢è®¡ç®—å›¾å³è¡¨ç¤ºäº†$f(x,y,z) = (x + y)z$ã€‚\nåå‘ä¼ æ’­ç®—æ³• ç®€å•æ ‡é‡åå‘ä¼ æ’­ç®—æ³• ä¸Šé¢è®¡ç®—å›¾çœŸå®å€¼è®¡ç®—çº¿è·¯å±•ç¤ºäº†è®¡ç®—çš„è§†è§‰åŒ–è¿‡ç¨‹ã€‚å‰å‘ä¼ æ’­ä»è¾“å…¥è®¡ç®—åˆ°è¾“å‡ºï¼ˆç»¿è‰²ï¼‰ï¼Œåå‘ä¼ æ’­ä»å°¾éƒ¨å¼€å§‹ï¼Œæ ¹æ®é“¾å¼æ³•åˆ™é€’å½’åœ°å‘å‰è®¡ç®—æ¢¯åº¦ï¼ˆæ˜¾ç¤ºä¸ºçº¢è‰²ï¼‰ï¼Œä¸€ç›´åˆ°ç½‘ç»œçš„è¾“å…¥ç«¯ã€‚å¯ä»¥è®¤ä¸ºï¼Œæ¢¯åº¦æ˜¯ä»è®¡ç®—é“¾è·¯ä¸­å›æµã€‚ å¦‚ä¸Šå›¾è®¡ç®—è¿‡ç¨‹ï¼Œå¯ä»¥ç”¨ä¸‹é¢å‡ ä¸ªä¸­é—´è¿‡ç¨‹åˆæˆï¼š $$ q = x + y $$ $$ f = q \\times z $$ åœ¨è¾“å…¥$x = -2, y = 5, z = -4$æƒ…å†µä¸‹ï¼Œç®­å¤´ä¸‹é¢çº¢è‰²æ•°å­—ä»£è¡¨ f å¯¹è¯¥å¤„å˜é‡çš„åå¯¼ï¼Œå³ $$ \\frac{\\partial f}{\\partial f} = 1 $$ $$ \\frac{\\partial f}{\\partial q} = \\frac{\\partial (q \\times z)}{\\partial q} = z\\vert_{z=-4}=-4 $$ $$ \\frac{\\partial f}{\\partial z} = \\frac{\\partial (q \\times z)}{\\partial z} = q\\vert_{q=3}=3 $$ æ ¹æ®æ±‚å¯¼çš„é“¾å¼æ³•åˆ™å¾— $$ \\frac{\\partial f}{\\partial x} = \\frac{\\partial f}{\\partial q}\\frac{\\partial q}{\\partial x}=1 \\cdot (-4) \\cdot 1 = -4 $$ $$ \\frac{\\partial f}{\\partial y} = \\frac{\\partial f}{\\partial q}\\frac{\\partial q}{\\partial y}=1 \\cdot (-4) \\cdot 1 = -4 $$ ç»“åˆä¸Šé¢è®¡ç®—å›¾å’Œæ±‚å¯¼çš„é“¾å¼æ³•åˆ™å¯ä»¥æœ‰ä»¥ä¸‹ç»“è®ºï¼š â€œ$è¾“å‡ºç»“æœå¯¹æŸä¸€å˜é‡çš„åå¯¼ = åå‘ä¼ æ’­æ—¶ä¸Šæ¸¸ä¼ é€’ä¸‹æ¥çš„åå¯¼æ•° \\times æœ¬åœ°åå¯¼æ•°ï¼ˆè¯¥å˜é‡è¾“å…¥çš„è®¡ç®—èŠ‚ç‚¹åå¯¼æ•°ï¼‰$â€ ä¸‹é¢ä»‹ç»ç¨å¾®å¤æ‚çš„è®¡ç®—å›¾ï¼Œå¦‚ä¸‹å›¾ã€‚ åˆ©ç”¨ä¸Šé¢å¾—åˆ°çš„ç»“è®ºå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªéå†çš„åå¯¼æ•°ï¼Œè¿™ä¸ªè®¡ç®—å›¾å’Œä¸Šé¢è®¡ç®—å›¾åŒºåˆ«ä¹‹å¤„åœ¨äºï¼šåœ¨ä¹˜æ³•èŠ‚ç‚¹çš„ç»“æœè¾“å‡ºåˆ°ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯é™¤æ³•èŠ‚ç‚¹å’Œå‡æ³•èŠ‚ç‚¹ï¼Œå¯¼æ•°åå‘ä¼ æ’­æ—¶ï¼Œéœ€è¦å°†ä¸Šæ¸¸ä¼ é€’çš„ä¸¤ä¸ªå¯¼æ•°ç›¸åŠ ï¼Œå³-0.25 + 1 = 0.75 è¿™æ˜¯åŸºäºä¸‹é¢çš„å®šç†ï¼š\nå®šç†ï¼šè‹¥å‡½æ•°$u=\\varphi(t), v=\\psi(t)$åœ¨ç‚¹ t å¯å¯¼ï¼Œ$z=f(u,v)$åœ¨ç‚¹(u,v)å¤„åå¯¼è¿ç»­ï¼Œåˆ™å¤åˆå‡½æ•°$z=f(\\varphi(t),\\psi(t))$åœ¨ç‚¹ t å¯å¯¼ï¼Œåˆ™æœ‰é“¾å¼æ³•åˆ™ $$ \\frac{\\mathrm{d} z }{\\mathrm{d} t} = \\frac{\\partial z}{\\partial u} \\cdot \\frac{\\mathrm{d} u }{\\mathrm{d} t} + \\frac{\\partial z}{\\partial v} \\cdot \\frac{\\mathrm{d} v }{\\mathrm{d} t} $$\nçŸ©é˜µå½¢å¼åå‘ä¼ æ’­ç®—æ³• ä¸‹é¢ä»‹ç»çŸ©é˜µå½¢å¼è®¡ç®—å›¾åŠåå‘ä¼ æ’­å…¬å¼ï¼Œå¦‚ä¸‹å›¾ç¥ç»ç½‘ç»œ Affine å±‚ã€‚ Affine å±‚ï¼šç¥ç»ç½‘ç»œåœ¨æ­£å‘ä¼ æ’­ä¸­è¿›è¡Œçš„çŸ©é˜µçš„ä¹˜ç§¯è¿ç®—åœ¨å‡ ä½•å­¦é¢†åŸŸè¢«ç§°ä¸ºâ€œä»¿å°„å˜æ¢â€ã€‚å› æ­¤ï¼Œè¿™é‡Œå°†è¿›è¡Œçš„ä»¿å°„å˜æ¢çš„å¤„ç†ç§°ä¸ºâ€œAffine å±‚â€ã€‚\nç¥ç»ç½‘ç»œä¸­è¿˜æœ‰å…¶ä»–æ¯”è¾ƒå¤æ‚çš„å±‚ï¼Œæ¢¯åº¦æ¨å¯¼æ¯”ä¸Šé¢ Affine å±‚çº¿æ€§åå¯¼æ•°æ¨å¯¼æ›´ä¸ºå¤æ‚ï¼Œåœ¨æ­¤ç•¥è¿‡ä»‹ç»åŠæ¨å¯¼ï¼Œä½†è¿ç”¨åˆ°çš„çŸ¥è¯†ä¸ä¸Šé¢æ–¹å¼ç±»ä¼¼ï¼Œå¼ºçƒˆå»ºè®®è‡ªå·±æ‰‹åŠ¨æ¨å¯¼ä¸‹ Affine å±‚åå‘ä¼ æ’­ï¼Œå¯¹è‡ªå·±ç†è§£æœ‰å¸®åŠ©ã€‚\nå‰é¢ä»‹ç»ç¥ç»ç½‘ç»œå­¦ä¹ ç­–ç•¥ä¹Ÿæ˜¯ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ï¼Œå³ $$ loss \\ function = E = \\varphi(y, t) $$ æŸå¤±å‡½æ•°/ç›®æ ‡å‡½æ•°ä¸ºé¢„æµ‹å€¼$y$å’Œç›‘ç£æ•°æ®$t$çš„å‡½æ•°ï¼Œå…¶ä¸­$y$æ˜¯ç»è¿‡ç¥ç»ç½‘ç»œæ­£å‘ä¼ æ’­å¾—åˆ°çš„é¢„æµ‹å€¼ï¼Œæ‰€ä»¥$y$æ˜¯ç¥ç»ç½‘ç»œæ‰€æœ‰å‚æ•°$W$çš„å‡½æ•°ï¼Œé‚£ä¹ˆç›®æ ‡å‡½æ•°æ˜¯å…³äºå‚æ•°$W$çš„å‡½æ•°ï¼ˆå‡¸å‡½æ•°ï¼‰ï¼Œå³ $$ loss \\ function = \\psi(\\textbf{W}) $$ æ ¹æ®æ¢¯åº¦ä¸‹é™æ³•ï¼Œéœ€è¦æ±‚å¾— $$ \\frac{\\partial L}{\\partial \\textbf{W}} $$ è¿™é‡Œçš„$L$è¡¨ç¤º$loss function$ï¼Œä¹Ÿå³æ˜¯$E$ã€‚æ ¹æ®ä¸Šé¢çš„ç¥ç»ç½‘ç»œåå‘ä¼ æ’­ç®—æ³•é€å±‚ä¼ æ’­æ¢¯åº¦ï¼Œå³å¯ä»¥é«˜æ•ˆåœ°æ±‚è§£æŸå¤±å‡½æ•°å¯¹å‚æ•°çš„æ¢¯åº¦ï¼Œå†æ ¹æ®éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼Œä¸æ–­æ›´æ–°æƒé‡å‚æ•°$W$ï¼Œæœ€å°åŒ–ç›®æ ‡å‡½æ•°ï¼Œå®Œæˆç®€å•ç¥ç»ç½‘ç»œçš„è®­ç»ƒå­¦ä¹ ã€‚\nåå‘ä¼ æ’­ç®—æ³•ç‰¹åˆ«ä¹‹å¤„ ç°ä»£çš„ç¥ç»ç½‘ç»œè§„æ¨¡å’Œå±‚æ•°ä¸æ–­å¢åŠ ï¼Œä¸€ä¸ªå¤æ‚çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¯èƒ½æ¯ä¸€å±‚æœ‰æˆç™¾é‡çº§ç¥ç»å…ƒï¼Œæœ‰ä¸Šç™¾å±‚æ·±åº¦ï¼Œä¸‹å›¾æ˜¾ç¤ºä¸€ä¸ªè¾ƒå¤æ‚çš„ç¥ç»ç½‘ç»œã€‚ å¦‚æœé‡‡ç”¨å¯¼æ•°å®šä¹‰æ–¹å¼ï¼Œå³$\\frac{\\partial L(w)}{\\partial w} = \\lim_{w \\to 0} \\frac{f(w + h)}{w}$æ±‚è§£ï¼Œé‚£ä¹ˆåœ¨æ±‚è§£æ¯ä¸€ä¸ªæƒé‡ï¼ˆå³ä¸€æ¡è¿æ¥è¾¹ï¼‰å‚æ•°çš„åå¯¼æ•°æ—¶ç¥ç»ç½‘ç»œéƒ½éœ€è¦å‘å‰ä¼ é€’ä¸€æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°å› ä¸ºè¶Šé åçš„ç¥ç»å…ƒè¢«é‡å¤è®¡ç®—çš„æ¬¡æ•°å°±è¶Šå¤šï¼Œéšç€ç¥ç»å…ƒä¸ªæ•°å’Œå±‚æ•°çš„å¢åŠ ï¼Œè¿™å°†ä¼šæ˜¯ä¸ªæŒ‡æ•°å¢åŠ çš„æ—¶é—´å¤æ‚åº¦ã€‚ç„¶è€Œï¼Œåˆ©ç”¨äº†å‡½æ•°æ±‚å¯¼çš„é“¾å¼æ³•åˆ™ï¼Œä»è¾“å‡ºå±‚åˆ°è¾“å…¥å±‚é€å±‚è®¡ç®—æ¨¡å‹å‚æ•°çš„æ¢¯åº¦å€¼ï¼Œå¯ä»¥çœ‹åˆ°æŒ‰ç…§è¿™ä¸ªæ–¹å‘è®¡ç®—æ¢¯åº¦ï¼Œå„ä¸ªç¥ç»å•å…ƒåªè®¡ç®—äº†ä¸€æ¬¡ï¼Œæ²¡æœ‰é‡å¤è®¡ç®—ã€‚è¿™ä¸ªè®¡ç®—æ–¹å‘èƒ½å¤Ÿé«˜æ•ˆçš„æ ¹æœ¬åŸå› æ˜¯ï¼šåœ¨è®¡ç®—æ¢¯åº¦æ—¶å‰é¢çš„å•å…ƒæ˜¯ä¾èµ–åé¢çš„å•å…ƒçš„è®¡ç®—ï¼Œè€Œâ€œä»åå‘å‰â€çš„è®¡ç®—é¡ºåºæ­£å¥½â€œè§£è€¦â€äº†è¿™ç§ä¾èµ–å…³ç³»ï¼Œå…ˆç®—åé¢çš„å•å…ƒï¼Œå¹¶ä¸”è®°ä½åé¢å•å…ƒçš„æ¢¯åº¦å€¼ï¼Œè®¡ç®—å‰é¢å•å…ƒçš„æ¢¯åº¦æ—¶å°±å¯ä»¥å……åˆ†åˆ©ç”¨å·²ç»è®¡ç®—å‡ºæ¥çš„ç»“æœï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚\næ€»ç»“ä¸æ€è€ƒ å¦‚ä»Šäººå·¥æ™ºèƒ½é¢†åŸŸä¸­æœ€é‡è¦çš„ç®—æ³•â€”â€”åå‘ä¼ æ’­ç®—æ³•å…¶ä¸»è¦æ€æƒ³æœ¬è´¨ä¹Ÿæ˜¯åˆ©ç”¨äº†åŠ¨æ€è§„åˆ’ï¼Œè¿™ç§æ–¹æ³•ç»“åˆäº†è§£ææ³•è®¡ç®—æ¢¯åº¦å’Œæ•°å€¼æ³•è®¡ç®—æ¢¯åº¦ï¼Œåˆ©ç”¨ç©ºé—´æ¢å–æ—¶é—´ï¼Œç¼©çŸ­æ±‚è§£å¤§é‡å‚æ•°æ¢¯åº¦çš„æ—¶é—´ï¼Œä»è€ŒåŠ é€Ÿç¥ç»ç½‘ç»œçš„è®­ç»ƒã€‚åå‘ä¼ æ’­ç®—æ³•çœ‹ä¸Šå»é«˜å¤§ä¸Šï¼Œä½†ä¹Ÿä¸è§å¾—æ˜¯ç”¨äº†å¤šé«˜çº§çš„æ–¹æ³•å’Œé«˜æ·±çš„çŸ¥è¯†ã€‚\nå‚è€ƒèµ„æ–™ï¼š\nhttps://zh.wikipedia.org/wiki/%E6%84%9F%E7%9F%A5%E5%99%A8\nhttps://zh.wikipedia.org/wiki/%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C\nhttps://www.cnblogs.com/subconscious/p/5058741.html\nã€ŠDeep Learning form Scratchã€‹\nã€Šæ·±åº¦å­¦ä¹ ã€‹\nå‘¨å¿—åã€Šæœºå™¨å­¦ä¹ ã€‹\nã€Šæ·±åº¦å­¦ä¹ [èŠ±ä¹¦]ã€‹\næèˆªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹\nhttps://www.zybuluo.com/hanbingtao/note/476663(ç‰›é€¼)\n","date":"2020-06-13T13:47:01Z","permalink":"https://qiyueliuhuo.github.io/posts/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B9%8B%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD%E7%AE%97%E6%B3%95/","title":"ç¥ç»ç½‘ç»œä¹‹åå‘ä¼ æ’­ç®—æ³•"}]